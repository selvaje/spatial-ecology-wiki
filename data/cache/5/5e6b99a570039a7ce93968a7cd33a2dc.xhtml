
<h1 class="sectionedit1" id="introduction_to_r">Introduction to R</h1>
<div class="level1">

<p>
The object of this document is to help you starting to use the R environment for statistical analysis and graphics. <br/>

You can read and follow the the text. Meanwhile you can copy the commands included into the frames part of this document, and paste them into an interactive R session. <br/>

Once you are familiar with the general functioning of R and of R&#039;s objects you can further advance in learning R with online manuals and guides. There is a great variety of documentation available at:
</p>
<ul>
<li class="level1"><div class="li">  <a href="http://www.r-project.org" class="urlextern" target="blanc" title="http://www.r-project.org" rel="nofollow noopener">www.r-project.org</a>. </div>
</li>
<li class="level1"><div class="li"> <a href="http://www.statmethods.net/index.html" class="urlextern" target="blanc" title="http://www.statmethods.net/index.html" rel="nofollow noopener">http://www.statmethods.net/index.html</a> </div>
</li>
<li class="level1"><div class="li"> <a href="http://wiki.r-project.org/rwiki/doku.php" class="urlextern" target="blanc" title="http://wiki.r-project.org/rwiki/doku.php" rel="nofollow noopener">http://wiki.r-project.org/rwiki/doku.php</a> </div>
</li>
</ul>

<p>
<br/>

As well efficacious learning tools we would recommend that the user experiment with commands by, for example, trying different options to those stated. 
This experimentation is an important part of learning R using this synthetic document.<br/>

<br/>

</p>

</div>
<!-- EDIT1 SECTION "Introduction to R" [1-890] -->
<h2 class="sectionedit2" id="starting_r_getting_help_stopping_r">Starting R, getting help, stopping R</h2>
<div class="level2">

</div>
<!-- EDIT2 SECTION "Starting R, getting help, stopping R" [891-939] -->
<h3 class="sectionedit3" id="start_r">Start R</h3>
<div class="level3">

<p>
from a shell window type 
</p>
<pre class="code">R</pre>

<p>
In the bash terminal the following text will appear:
</p>
<pre class="code">R version 2.10.0 (2009-10-26)
Copyright (C) 2009 The R Foundation for Statistical Computing
ISBN 3-900051-07-0
R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type &#039;license()&#039; or &#039;licence()&#039; for distribution details.
Natural language support but running in an English locale\\
R is a collaborative project with many contributors.
Type &#039;contributors()&#039; for more information and
&#039;citation()&#039; on how to cite R or R packages in publications.
Type &#039;demo()&#039; for some demos, &#039;help()&#039; for on-line help, or
&#039;help.start()&#039; for an HTML browser interface to help.
Type &#039;q()&#039; to quit R.</pre>

<p>
the <strong>&gt;</strong> sign and the following blinking cursor is advising you are in the R environment.
If you like, enter in <em class="u">administrative mode</em> type <strong>sudo R</strong> and you will be able to install packages
</p>
<pre class="code">stefano@stefano-linux:~\$ sudo R</pre>

<p>
<br/>

<br/>

</p>

</div>
<!-- EDIT3 SECTION "Start R" [940-1953] -->
<h3 class="sectionedit4" id="getting_help">Getting help</h3>
<div class="level3">

<p>
R provides help with function and commands. On-line help gives useful information as well. Getting used to R help is a key to successful statistical modelling. The online help can be accessed in <abbr title="HyperText Markup Language">HTML</abbr> format by typing:
</p>
<pre class="code r">  help.start()</pre>

<p>
A keyword search is possible using the Search Engine and Keywords link.
You can also use the help() or ? functions. For example, if we want to know how to use the matrix() function, the
following two commands are equivalents:
</p>
<pre class="code r">  help(matrix)
  ? matrix</pre>
<div class="noteimportant">Once you are in the help section, you can use “enter” to scroll down the menu and <strong>q</strong> to go back at the R prompt.<br/>

</div>
<p>
The <strong>str(object.name)</strong> command is used to display the internal structure of an R object<br/>

The <strong>summary(object.name)</strong> command gives a <em>summary</em> of a <strong>a</strong> object, usually a statistical summary but it is <em>generic</em> meaning it has different operations for different classes of <strong>a</strong><br/>

</p>

<p>
<strong>dir()</strong> show files in the current directory<br/>

<strong>ls.str()</strong> str() for each variable in the search path<br/>

<strong>getwd()</strong> is asking for the current working directory<br/>

<br/>

<br/>

</p>

</div>
<!-- EDIT4 SECTION "Getting help" [1954-3100] -->
<h3 class="sectionedit5" id="stop_r">Stop R</h3>
<div class="level3">
<pre class="code r">  q()</pre>

<p>
When you quit, R will ask you if you want to save the workspace (that is, all of the variables you have defined in this session); say “no” in order to avoid clutter.
</p>
<div class="notetip">Should an R command seem to be stuck or take longer than you’re willing to wait, type <strong>Control-C</strong>.

</div>
<p>
<br/>

</p>

</div>
<!-- EDIT5 SECTION "Stop R" [3101-3438] -->
<h3 class="sectionedit6" id="calling_linux_shell_scripting_commands">Calling linux shell scripting commands</h3>
<div class="level3">

<p>
<strong>system(“…”)</strong> is used to call any linux scripting commands within the R environment
</p>
<pre class="code"> system(&quot;pwd&quot;)
 # is equal to write 
 getwd()</pre>

<p>
<br/>

<br/>

</p>

</div>
<!-- EDIT6 SECTION "Calling linux shell scripting commands" [3439-3637] -->
<h2 class="sectionedit7" id="inputs_and_outputs">Inputs and outputs</h2>
<div class="level2">

<p>
Once you have opened an R session and eventually loaded the library you need, you can start exploring your data<br/>

<br/>

</p>

</div>
<!-- EDIT7 SECTION "Inputs and outputs" [3638-3787] -->
<h3 class="sectionedit8" id="loading_data">Loading data</h3>
<div class="level3">

<p>
<strong>load(file.name)</strong> function, loads R type datasets written with the save function 
 load(file.name) <br/>

<br/>

</p>

</div>
<!-- EDIT8 SECTION "Loading data" [3788-3918] -->
<h3 class="sectionedit9" id="saving_data">Saving data</h3>
<div class="level3">

<p>
<strong>save(object.name.1, object.name.2, … )</strong> function save the specified object in XDR platform independent binary format<br/>

<br/>

</p>

</div>
<!-- EDIT9 SECTION "Saving data" [3919-4068] -->
<h3 class="sectionedit10" id="reading_tables">Reading tables</h3>
<div class="level3">

<p>
<strong>read.table(“filename”)</strong> Reads a file in table format and creates a data frame from it, with cases corresponding to lines and variables to fields within the file. The default separator <em>sep=“”</em> is any whitespace. You might need <em>sep=“,”</em> or <em>“;”</em> and so on. Use <em>header=TRUE</em> to read the first line as a header of column names. The <strong>as.is=TRUE</strong> specification is used to prevent character vectors from being converted to factors. The <strong>comment.char=““</strong> specification is used to prevent ”#” from being interpreted as a comment and use <strong>skip=n</strong> to skip n lines before reading data;<br/>

For more datails
</p>
<pre class="code r">  ? read.table
&nbsp;
  landuse04=read.csv(&quot;~/ost4sem/exercise/basic_adv_r/inputs/2004_landuse.csv&quot;, header=TRUE, sep=&quot;,&quot;, dec=&quot;.&quot;, na.string=&quot;:&quot;)</pre>

<p>
<strong>read.csv(“filename”)</strong> is set to read comma separated files. read.csv(file.name, header = TRUE, sep = “,”, quote=“\”“, dec=”.“, fill =TRUE,  comment.char=”“, …)
</p>

<p>
<strong>read.delim(“filename”)</strong> is set for reading tab-delimited files<br/>

</p>

<p>
<strong>read.fwf()</strong> reads a table of fixed width formatted data into a ’data.frame’; widths is an integer vector, giving the widths of the fixed-width fields
</p>

</div>
<!-- EDIT10 SECTION "Reading tables" [4069-5259] -->
<h3 class="sectionedit11" id="show_variables_and_data_in_your_workspace">Show variables and data in your workspace</h3>
<div class="level3">

<p>
The list function ls() outputs a list of existing R objects
</p>
<pre class="code r">  ls()</pre>

<p>
the structure function <strong>str(object.name)</strong> informs you of the structure of a specific object
the summary function <strong>summary(object.name)</strong> informs you of basic statistics of a specific object<br/>

<br/>

</p>

</div>
<!-- EDIT11 SECTION "Show variables and data in your workspace" [5260-5595] -->
<h3 class="sectionedit12" id="save_and_remove_data_or_r_objects">Save and remove data or R objects</h3>
<div class="level3">

<p>
<strong>save(file, …)</strong> saves the specified objects (…) in the XDR platform-independent binary format
</p>
<pre class="code r">  save(landuse04, file=&quot;~/ost4sem/exercise/basic_adv_r/outputs/landuse2004&quot;)</pre>

<p>
<strong>save.image(file)</strong> saves all objects
</p>
<pre class="code r">  save(file=&quot;~/ost4sem/exercise/basic_adv_r/outputs/landuse2004_and_more&quot;)</pre>

<p>
<strong>rm(file, …)</strong> removes the object you created or data you uploaded
</p>
<pre class="code r">  rm(landuse04)</pre>

<p>
No objects are present in memory now, use ls function to check it
</p>
<pre class="code r">  ls()
  character(0)</pre>

<p>
But since you saved the landuse2004 data you can reload it using the <strong>load()</strong> function and check its structrure using the <strong>str</strong> function
</p>
<pre class="code r">  load(&quot;~/ost4sem/exercise/basic_adv_r/outputs/landuse2004&quot;)
  str(landuse04)</pre>

<p>
as a result you will see the following information:
</p>
<pre class="code">&#039;data.frame&#039;:   72 obs. of  13 variables:                    
$ geographic.Unit                     : Factor w/ 72 levels &quot;be10 Région de Bruxelles-Capitale/Brussels Hoofdstedelijk Gewest&quot;,..: 20 17 16 22 19 18 15 2 1 8 ...                                                                                                                                            
 $ landuse                             : logi  NA NA NA NA NA NA ...                                                                                   
 $ total.Total.area                    : num  NA NA NA NA NA ...                                                                                       
 $ agriarea.Utilized.agricultural.area : num  NA NA NA NA NA ...                                                                                       
 $ arabland.Arable.land                : num  NA NA NA NA NA ...                                                                                       
 $ forest.Wooded.area                  : num  NA NA NA NA NA ...
 $ garden.Private.gardens              : num  NA NA NA NA NA NA 0.2 0 0 0.1 ...
 $ grasland.Permanent.grassland        : num  NA NA NA NA NA ...
 $ greenfod.Green.fodder.on.arable.land: num  NA NA NA NA NA ...
 $ fallow.Fallow                       : num  NA NA NA NA NA NA 23.6 0 0 7.4 ...
 $ olivepl.Olive.plantations           : int  NA NA NA NA NA NA 0 0 0 0 ...
 $ permcrop.Permanent.crops            : num  NA NA NA NA NA NA 21.4 0 0 19.2 ...
 $ vineyard.Vineyards                  : num  NA NA NA NA NA NA 0 0 0 0 ...
&gt;</pre>

<p>
<br/>

</p>

</div>
<!-- EDIT12 SECTION "Save and remove data or R objects" [5596-8060] -->
<h2 class="sectionedit13" id="variables_and_calculations">Variables and calculations</h2>
<div class="level2">

<p>
R has an interactive calculations function. The command is executed and results are displayed.<br/>

R uses:  +, -, /, and ^  for addition, subtraction, multiplication, division and exponentiation, respectively
</p>
<pre class="code">2+2 </pre>

<p>
R will execute and display
</p>
<pre class="code">[1] 4</pre>

<p>
the [1] at the beginning of the line is just R printing an index of element numbers. If you print a result that appears on multiple lines, R will put an index at the beginning of each line.
</p>
<pre class="code">2*5
[1] 10</pre>
<pre class="code">10/2
[1] 5</pre>
<pre class="code">2^3
[1] 8</pre>

</div>
<!-- EDIT13 SECTION "Variables and calculations" [8061-8589] -->
<h3 class="sectionedit14" id="variable_settings">variable settings</h3>
<div class="level3">

<p>
you can simply create a variable by typing:
<strong>variable name = function, constant or calculation.</strong> <br/>

Example:<br/>

</p>
<pre class="code">x =3*2</pre>

<p>
The results of 3*2 is not displayed. In fact, the x variable value is stored in the memory without printing it. To display the x value you can use: 
</p>
<pre class="code r">  print(x) 
  [1] 6</pre>

<p>
or 
</p>
<pre class="code r">  x
  [1] 6</pre>

<p>
Most users apply a similar syntax using the &#039;←&#039; character string instead of the = character.
</p>
<pre class="code r">  x &lt;- 3
  x
  [1] 3</pre>

<p>
Also remember that R is case sensitive, print(X) or X is different from x. For instance
</p>
<pre class="code r">  a &lt;- 3
  a
  [1] 3
  A
  Error: object 'A' not found</pre>

<p>
Variable names in R must begin with a letter, followed by alphanumeric characters. 
</p>
<pre class="code r">  3e = 2
  Error: unexpected input in &quot;3e &quot;</pre>

<p>
In long names you can use ”.“ or “_” as in 
</p>

<p>
very.long.variable.name.X or very<em>long</em>variable<em>name</em>Y but you can’t use blank spaces in variable names. 
Avoid single letter names such us: c, l, q, t, C, D, F, I, and T, which are either built-in R functions or hard to tell apart.
</p>
<pre class="code r">  very.long.variable.name.X3 = 3
  very.long.variable.name.X3
  [1] 3</pre>

</div>
<!-- EDIT14 SECTION "variable settings" [8590-9767] -->
<h3 class="sectionedit15" id="interactive_calculations">Interactive calculations</h3>
<div class="level3">

<p>
Once defined,  you can use variables in interactive calculations :<br/>

</p>
<pre class="code r">  b = 2*2
  a = 2*3
  a*b
  [1] 24</pre>

<p>
And you can use variables in formulas :<br/>

</p>
<pre class="code r">  c = 60 /(a+b)
  c
 [1] 6</pre>

<p>
typing a;b you can display a and b variables at the same time:<br/>

</p>
<pre class="code r"> a;b
  [1] 6
  [1] 4</pre>

<p>
If you omit to close a parenthesis, R will display a <em>+</em> sign. 
</p>
<pre class="code r"> c = 60 /(a+b
  +</pre>

<p>
<br/>

</p>
<div class="noteimportant">In this case you can either close the parenthesis in the next line or type ctrl + c to go back to a new starting prompt. 

</div>
<p>
<br/>

</p>

</div>
<!-- EDIT15 SECTION "Interactive calculations" [9768-10371] -->
<h3 class="sectionedit16" id="operators_order">Operators order</h3>
<div class="level3">

<p>
When using more complex formulas be aware of the importance of the order of operators. Parenthesis have priority over exponentiation, or powers, then comes multiplication and division, finally addition and subtraction. The following command:<br/>

</p>
<pre class="code r">  C = ((a + 2 * sqrt(b))/(a + 8 * sqrt(b)))/2
  C
  [1] 0.2272727</pre>

<p>
is different from:<br/>

</p>
<pre class="code r">  C = a + 2 * sqrt(b) / a + 8 * sqrt(b) / 2
  C
  [1] 14.66667</pre>

<p>
as well as 
</p>
<pre class="code r">  100-40/2^4
  [1] 97.5</pre>

<p>
is different from:<br/>

</p>
<pre class="code r">  (100-40)/2^4 
  [1] 3.75</pre>

<p>
and 
</p>
<pre class="code r">    -2^4
    [1] -16
&nbsp;</pre>

<p>
is different from: <br/>

</p>
<pre class="code r">   (-2)^4
   [1] 16</pre>

</div>
<!-- EDIT16 SECTION "Operators order" [10372-11067] -->
<h3 class="sectionedit17" id="logical_values">Logical values</h3>
<div class="level3">

<p>
R can perform conditional tests and generate True or False values as results. <br/>

The logical operators are <strong>&lt;</strong>, <strong>⇐</strong>, <strong>&gt;</strong>, <strong>&gt;=</strong>, <strong>==</strong> for exact equality and <strong>!=</strong> for inequality. 
</p>
<pre class="code r">  x = 60
  x &gt; 100
  [1] FALSE
&nbsp;
  x == 70
  [1] FALSE
&nbsp;
  x &gt;   3
  [1] TRUE
&nbsp;
  x = 100
  [1] TRUE</pre>

<p>
Logical values can be stored as variables: 
</p>
<pre class="code r">x = 60
  logical.value =  x &gt;  3
  logical.value
  [1] TRUE</pre>

<p>
In addition if c1 and c2 are logical expressions, then c1 <strong>&amp;</strong> c2 is their intersection (“and”), c1 <strong>|</strong> c2 is their union (“or”), and <strong>!</strong> !c1 is the negation of c1. 
<br/>

<br/>

</p>

</div>
<!-- EDIT17 SECTION "Logical values" [11068-11708] -->
<h1 class="sectionedit18" id="r_objects">R objects</h1>
<div class="level1">

<p>
The entities R operates on are technically known as <strong>objects</strong>. Examples are <em class="u">vectors of numeric</em> (real) or <em class="u">complex values</em>, <em class="u">vectors of logical</em> values and <em class="u">vectors of character strings</em>. These are known as <strong>“atomic”</strong> structures since their components are all of the same type, or mode, namely numeric, complex, logical, character and raw. 
R also operates on objects called <em class="u">lists</em>, which are of mode list. These are ordered sequences of objects which individually can be of any mode. Lists are known as <strong>“recursive”</strong> rather than atomic structures since their components can themselves be lists in their own right.<br/>

</p>

<p>
The other recursive structures are those of mode <strong>function</strong> and <strong>expression</strong>. Functions are the objects that form part of the R system along with similar user written functions, which we discuss in some detail later. Expressions as objects form an advanced part of R which will not be discussed in this guide, except indirectly when we discuss formulae used with modeling in R.<br/>

</p>

<p>
By the <em class="u">mode</em> of an object we mean the basic type of its fundamental constituents. This is a special case of a <strong>“property”</strong> of an object. Another property of every object is its <em class="u">length</em>. The functions mode(object) and length(object) can be used to find out the mode and length of any defined structure 10.<br/>

</p>

<p>
Further properties of an object are usually provided by <em class="u">attributes</em>(object), (see &#039;Getting and setting attributes&#039;). Because of this, mode and length are also called “intrinsic attributes” of an object. For example, if z is a complex vector of length 100, then in an expression mode(z) is the character string “complex” and length(z) is 100.<br/>

<br/>

</p>

</div>
<!-- EDIT18 SECTION "R objects" [11709-13436] -->
<h2 class="sectionedit19" id="vectors">Vectors</h2>
<div class="level2">

<p>
Vectors are combinations of scalars in a string structure. Vectors must have all values of the same mode. Thus any given vector must be unambiguously either logical, numeric, complex, character or raw. (The only apparent exception to this rule is the special “value” listed as NA for quantities not available, but in fact there are several types of NA). Note that a vector can be empty and still have a mode. For example the empty character string vector is listed as character(0) and the empty numeric vector as numeric(0). <br/>

</p>

<p>
<strong>c(…)</strong> is the generic function to combine arguments with the default forming a vector; with RECURSIVE=TRUE descends through lists combining all elements into one vector.<br/>

To see details for the generic function c(…) and combine arguments forming a vector: 
</p>
<pre class="code r">? c </pre>

<p>
As an example we can create a simple vector of seven values typing: <br/>

</p>
<pre class="code r">  c(2,3,4,5,10,5,8)
  [1]  2  3  4  5 10  5  8</pre>

<p>
We can generate a sequence using the syntax :<br/>

</p>
<pre class="code r">  1:10
  [1]  1  2  3  4  5  6  7  8  9 10</pre>

<p>
<strong>seq()</strong> <br/>

We can generate the same sequence of <em>1:10</em> command using the seq() function. The syntax will be :<br/>

</p>
<pre class="code r"> seq(1,10)
  [1]  1  2  3  4  5  6  7  8  9 10</pre>

<p>
The seq() function “seq(from = number, to = number, by = number)” allow to create a vector starting from a value to another by a defined increment:<br/>

</p>
<pre class="code r">  seq(1,10, 0.25)
  [1]  1.00  1.25  1.50  1.75  2.00  2.25  2.50  2.75  3.00  3.25  3.50  3.75
  [13]  4.00  4.25  4.50  4.75  5.00  5.25  5.50  5.75  6.00  6.25  6.50  6.75
  [25]  7.00 7.25  7.50  7.75  8.00  8.25  8.50  8.75  9.00  9.25  9.50  9.75
  [37]  10.0
&nbsp;
  seq(from = 1, to = 10, by =  0.25)
  [1]  1.00  1.25  1.50  1.75  2.00  2.25  2.50  2.75  3.00  3.25  3.50  3.75
  [13]  4.00  4.25  4.50  4.75  5.00  5.25  5.50  5.75  6.00  6.25  6.50  6.75
  [25]  7.00  7.25  7.50  7.75  8.00  8.25  8.50  8.75  9.00  9.25  9.50  9.75
  [37] 10.00</pre>

<p>
<strong>rep()</strong>  The replicate function  “rep(x,times)”  enables you to replicate a vector several times in a more complex vector. 
Calculations can be included to form vectors as well and functions can be combined in the same command:<br/>

</p>
<pre class="code r">  one2tree = 1:3 
  rep(one2tree,10) 
 [1] 1 2 3 1 2 3 1 2 3 1 2 3 1 2 3 1 2 3 1 2 3 1 2 3 1 2 3 1 2 3
&nbsp;
  c(10*0:10)
  [1]   0  10  20  30  40  50  60  70  80  90 100
&nbsp;
  rep(c (5*40:1, 5*1:40, 5, 6,7,8, 3, 2001:2014), 2)
  [1]  200  195  190  185  180  175  170  165  160  155  150  145  140  135  130
  [16]  125  120  115  110  105  100   95   90   85   80   75   70   65   60   55
  [31]   50   45   40   35   30   25   20   15   10    5    5   10   15   20   25
  [46]   30   35   40   45   50   55   60   65   70   75   80   85   90   95  100
  [61]  105  110  115  120  125  130  135  140  145  150  155  160  165  170  175
  [76]  180  185  190  195  200    5    6    7    8    3 2001 2002 2003 2004 2005
  [91] 2006 2007 2008 2009 2010 2011 2012 2013 2014  200  195  190  185  180  175
  [106]  170  165  160  155  150  145  140  135  130  125  120  115  110  105  100
  [121]   95   90   85   80   75   70   65   60   55   50   45   40   35   30   25
  [136]   20   15   10    5    5   10   15   20   25   30   35   40   45   50   55
  [151]   60   65   70   75   80   85   90   95  100  105  110  115  120  125  130
  [166]  135  140  145  150  155  160  165  170  175  180  185  190  195  200    5
  [181]    6    7    8    3 2001 2002 2003 2004 2005 2006 2007 2008 2009 2010 2011
  [196] 2012 2013 2014
&nbsp;
  rep(seq(1,3,0.5),3)
  [1] 1.0 1.5 2.0 2.5 3.0 1.0 1.5 2.0 2.5 3.0 1.0 1.5 2.0 2.5 3.0</pre>

</div>
<!-- EDIT19 SECTION "Vectors" [13437-17082] -->
<h2 class="sectionedit20" id="missing_values">Missing Values</h2>
<div class="level2">

<p>
In some cases the components of a vector or of an R object more in general, may not be completely known. When an element or value is “not available” or a “missing value” in the statistical sense, a place within a vector may be reserved for it by assigning it the special value <strong>NA</strong>. <br/>

Any operation on an NA becomes an NA. 
</p>

<p>
The function <strong>is.na(x)</strong> gives a logical vector of the same size as x with value TRUE if and only if the corresponding element in x is NA.
</p>
<pre class="code r">   &gt; z &lt;- c(1:3,NA);  ind &lt;- is.na(z)
   &gt; ind
   [1] FALSE FALSE FALSE  TRUE</pre>

<p>
There is a second kind of “missing” values which are produced by numerical computation, the so-called Not a Number, <strong>NaN</strong>, values. Examples are 0/0 or Inf - Inf which both give NaN since the result cannot be defined sensibly.
</p>
<pre class="code r">  &gt; Inf-Inf
  [1] NaN
  &gt; 0/0
  [1] NaN</pre>

<p>
In summary, is.na(xx) is TRUE both for NA and NaN values. To differentiate these, is.nan(xx) is only TRUE for NaNs. Missing values are sometimes printed as &lt;NA&gt; when character vectors are printed without quotes. 
</p>
<pre class="code r">  z &lt;- c(1:3,NA)
  is.not.available &lt;- is.na(z) 
  is.not.a.number &lt;-is.nan(z)
&nbsp;
  is.not.a.number
  [1] FALSE FALSE FALSE FALSE
  is.not.available 
  [1] FALSE FALSE FALSE  TRUE
&nbsp;</pre>

</div>
<!-- EDIT20 SECTION "Missing Values" [17083-18384] -->
<h2 class="sectionedit21" id="matrix">Matrix</h2>
<div class="level2">

<p>
Matrices, or more generally arrays, are multi-dimensional generalizations of vectors. In fact, they are vectors that can be indexed by two or more indices and will be printed in a special way. See Arrays and matrices.<br/>

</p>
<ul>
<li class="level1"><div class="li"> Factors provide compact ways to handle categorical data. See Factors.</div>
</li>
<li class="level2"><div class="li"> Lists are a general form of vector in which the various elements need not be of the same type, and are often themselves vectors or lists. Lists provide a convenient way to return the results of a statistical computation. See Lists.</div>
</li>
</ul>

<p>
<br/>
The matrix() function creates a matrix from the given set of values. We use the matrix(x, nrow=, ncol=) function to set the matrix cell values, the number of rows and the number of columns. We can use the colnames() and rownames() functions to set the column and row names of the matrix-like object.
</p>
<pre class="code r">  matrix(data = NA, nrow = 2, ncol = 3) 
  example.matrix = matrix(0,2,3)
  example.matrix
       [,1] [,2] [,3]
  [1,]    0    0    0
  [2,]    0    0    0
&nbsp;
  example.matrix[1,]
  [1] 0 0 0
&nbsp;
  example.matrix[,2]
  [1] 0 0
&nbsp;
  example.matrix[1,] = 1:3
  example.matrix[2,] = c(5,10,4)
  example.matrix
       [,1] [,2] [,3]
  [1,]    1    2    3
  [2,]    5   10    4
&nbsp;
&nbsp;
  matrix.head = c(&quot;col a&quot;,&quot;col b&quot;,&quot;column c&quot;)
  matrix.side = c(&quot;first raw&quot;,&quot;second raw&quot;)
  str(matrix.side)
  chr [1:2] &quot;first raw&quot; &quot;second raw&quot;</pre>

<p>
When using ” “  we create and refer to a character type “chr” input
</p>
<pre class="code r">  numeric.vector = c(rep(c (5*10:1, 5, 6), 2))
  character.vector  = as.character(numeric.vector)
  str(character.vector)
  chr [1:24] &quot;50&quot; &quot;45&quot; &quot;40&quot; &quot;35&quot; &quot;30&quot; &quot;25&quot; &quot;20&quot; &quot;15&quot; &quot;10&quot; ...
&nbsp;
&nbsp;
  colnames(example.matrix) = matrix.head
  rownames(example.matrix) = matrix.side
  example.matrix
             col a col b column c
  first raw      1     2        3
  second raw     5    10        4
&nbsp;
  str(example.matrix)
  num [1:2, 1:3] 1 5 2 10 3 4
   - attr(*, &quot;dimnames&quot;)=List of 2
    ..$ : chr [1:2] &quot;first raw&quot; &quot;second raw&quot;
    ..$ : chr [1:3] &quot;col a&quot; &quot;col b&quot; &quot;column c&quot;</pre>

</div>
<!-- EDIT21 SECTION "Matrix" [18385-20427] -->
<h2 class="sectionedit22" id="array">Array</h2>
<div class="level2">

<p>
An array can be considered a multiple subscripted collection of data entries, for example numeric. R allows simple facilities for creating and handling arrays, and in particular the special case of matrices. 
</p>

<p>
As well as giving a vector structure a dim attribute, arrays can be constructed from vectors by the array function, which has the form <br/>

array(data<em>vector, dim</em>vector)
</p>
<pre class="code r">   Z &lt;- array(1:24, c(3,4,2))
   Z
   , , 1
        [,1] [,2] [,3] [,4]
   [1,]    1    4    7   10
   [2,]    2    5    8   11
   [3,]    3    6    9   12
   , , 2
        [,1] [,2] [,3] [,4]
   [1,]   13   16   19   22
   [2,]   14   17   20   23
   [3,]   15   18   21   24</pre>

</div>
<!-- EDIT22 SECTION "Array" [20428-21118] -->
<h2 class="sectionedit23" id="data_frames">Data Frames</h2>
<div class="level2">

<p>
Data frames are matrix-like structures, in which the columns can be of different types. Think of data frames as <em>data matrices</em> with one row per observational unit but with (possibly) both numerical and categorical variables. Many experiments are best described by data frames: the treatments are categorical but the response is numeric. <br/>

As a result R dataframes are tightly coupled collections of variables which share many of the properties of matrices and of lists. Data frames are used as the fundamental data structure by most of R&#039;s modeling software.<br/>

A data frame is a list with class “data.frame”. There are restrictions on lists that may be made into data frames, namely :
</p>
<ul>
<li class="level1"><div class="li"> The components must be vectors (numeric, character, or logical), factors, numeric matrices, lists, or other data frames.</div>
</li>
<li class="level2"><div class="li"> Matrices, lists, and data frames provide as many variables to the new data frame as they have columns, elements, or variables, respectively.</div>
</li>
<li class="level2"><div class="li"> Numeric vectors, logicals and factors are included, and character vectors are coerced to be factors, whose levels are the unique values appearing in the vector.</div>
</li>
<li class="level2"><div class="li"> Vector structures appearing as variables of the data frame must all have the same length, and matrix structures must all have the same row size. </div>
</li>
</ul>

<p>
see
</p>
<pre class="code r">   ? data.frame</pre>

<p>
to learn how to construct a dataframe
</p>
<pre class="code r">   my.data.frame = data.frame(v=1:4,ch=c(&quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;d&quot;),n=10)
   my.data.frame
    v ch  n
   1 1  a 10
   2 2  b 10
   3 3  c 10
   4 4  d 10</pre>

<p>
or
</p>
<pre class="code r">  my.data.frame = data.frame(vector=1:4,character=c(&quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;d&quot;),const.vector=10,row.names =c(&quot;data1&quot;,&quot;data2&quot;,&quot;data3&quot;,&quot;data4&quot;))
  my.data.frame
        vector character const.vector
  data1      1         a           10
  data2      2         b           10
  data3      3         c           10
  data4      4         d           10</pre>

</div>
<!-- EDIT23 SECTION "Data Frames" [21119-23022] -->
<h3 class="sectionedit24" id="data_selection_and_manipulation">data selection and manipulation</h3>
<div class="level3">

<p>
You can extract data from dataframes using the   <strong>[ [    ] ]</strong> and <strong>$</strong> sign:
</p>
<pre class="code r">  my.data.frame[[&quot;character&quot;]]
  [1] a b c d
  Levels: a b c d
&nbsp;
  my.data.frame[[2]]
  [1] a b c d
  Levels: a b c d</pre>

<p>
call the 3rd value of the character vector :
</p>
<pre class="code r">  my.data.frame[[2]][3]
  [1] c
  Levels: a b c d</pre>

<p>
or using the $ syntax:
</p>
<pre class="code r">my.data.frame$vector
  [1] 1 2 3 4
&nbsp;
  my.data.frame$character[2:3]
  [1] b c
  Levels: a b c d</pre>

<p>
You can add single arguments to a data frame, query information, select and manipulate arguments or single values from a dataframe 
</p>
<pre class="code r">my.data.frame$new
  NULL
&nbsp;
  my.data.frame$new = c(10,11,20,40)
  my.data.frame
        vector character const.vector new
  data1      1         a           10  10
  data2      2         b           10  11
  data3      3         c           10  20
  data4      4         d           10  40
  str(my.data.frame)
  'data.frame':	4 obs. of  4 variables:
  $ vector      : int  1 2 3 4
  $ character   : Factor w/ 4 levels &quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;d&quot;: 1 2 3 4
  $ const.vector: num  10 10 10 10
  $ new         : num  10 11 20 40</pre>

<p>
<strong>length(object.name)</strong>
number of elements in an object such as matrix vector or dataframes:
</p>
<pre class="code r">  length(my.data.frame$new) 
  [1] 4</pre>

<p>
<br/>

<strong>which(object.name)</strong> and <strong>which.max(object.name)</strong>
return the index of a specific or of the greatest element of an object
</p>
<pre class="code r">  which.max(my.data.frame$new) 
  [1] 4
&nbsp;
  which(my.data.frame$new==20) 
  [1] 3</pre>

<p>
<br/>
<strong>max(object.name)</strong>
return the value of the greatest element
</p>
<pre class="code r">  max(my.data.frame$new) 
  [1] 40</pre>

<p>
<br/>
<strong>sort(object.name)</strong>
sort from small to big 
</p>
<pre class="code r">  sort(my.data.frame$new) 
  [1] 10 11 20 40</pre>

<p>
<br/>
<strong>rev(object.name)</strong>
from big to small
</p>
<pre class="code r">  rev(sort(my.data.frame$new)) # 
  [1] 40 20 11 10</pre>

<p>
<br/>
<strong>subset(object.name, …)</strong>
subset returns a selection of an R-object with respect to criteria (
typically comparisons: x$V1 &lt; 10); if the R-object is a data frame, the option
select gives the variables to be kept or dropped using a minus sign
</p>
<pre class="code r">  subset(my.data.frame, my.data.frame$new == 20)
     v ch  n new
   3 3  c 10  20
&nbsp;
sample(my.data.frame$new, 3)
[1] 10 11 20
&nbsp;
sample(my.data.frame$new, 3)
[1] 40 10 11
&nbsp;
sample(my.data.frame$new, 3)
[1] 11 10 40</pre>

<p>
<br/>

</p>

</div>
<!-- EDIT24 SECTION "data selection and manipulation" [23023-25396] -->
<h2 class="sectionedit25" id="more_examples">More examples</h2>
<div class="level2">

<p>
The following R commands give an example of the simple procedure of <em>importing</em> data, <em>cleaning</em> a table by extracting relevant information, <em>checking</em> the presence of missing data.
</p>
<pre class="code r">  landuse04=read.csv(&quot;~/ost4sem/studycase/Lab_scripts/inputs/2004_landuse.csv&quot;, header=TRUE, sep=&quot;,&quot;, dec=&quot;.&quot;, na.string=&quot;:&quot;)
&nbsp;
  forests04 = subset(landuse04, landuse04$forest.Wooded.area &gt;= 0 )
  forests04$landuse = NULL
  forests04.check=na.fail(forests04)
  forests04$total.Total.area[1] = NA
  forests04.check=na.fail(forests04)
  Error in na.fail.default(forests04) : missing values in object</pre>

<p>
<br/>
now recover the situation at the begin with no NA
</p>
<pre class="code r">  forests04 = subset(landuse04, landuse04$forest.Wooded.area &gt;=0 )
  forests04$landuse = NULL
  forests04.check=na.fail(forests04)
  str(forests04)
  'data.frame':   15 obs. of  12 variables:
  data.frame':   15 obs. of  12 variables:
  $ geographic.Unit                     : Factor w/ 72 levels &quot;be10¬†R√©gion de Brxelles-Capitale/Brussels Hoofdstedelijk Gewest&quot;,..: 15 2 1 8 3 4 5 6 7 14 ...
  $ total.Total.area                    : num  3052.8 16.1 16.1 1352.2 286.7 ...
  $ agriarea.Utilized.agricultural.area : num  1393.8 0.2 0.2 633.8 91.3 ...
  $ arabland.Arable.land                : num  840 0.2 0.2 430.8 60.2 ...
  $ forest.Wooded.area                  : num  606.5 1.8 1.8 108.1 34 ...
  $ garden.Private.gardens              : num  0.2 0 0 0.1 0 0 0 0 0 0.1 ...
  $ grasland.Permanent.grassland        : num  530 0.1 0.1 181.4 28.7 ...
  $ greenfod.Green.fodder.on.arable.land: num  248.6 0 0 161.4 41.7 ...
  $ fallow.Fallow                       : num  23.6 0 0 7.4 1.1 1.2 1.2 2.3 1.7 16.2 ...
  $ olivepl.Olive.plantations           : int  0 0 0 0 0 0 0 0 0 0 ...
  $ permcrop.Permanent.crops            : num  21.4 0 0 19.2 1.5 9.7 3.1 4.1 0.9 2.1 ...
  $ vineyard.Vineyards                  : num  0 0 0 0 0 0 0 0 0 0 ...</pre>

<p>
<br/>
Do you see something strange?  look at the <em>forests04$geographic.Unit</em> level of factors and the dataframe number of variables !
</p>

<p>
Let&#039;s fix it now!
</p>
<pre class="code r">  library(gdata)
  forests04 = drop.levels(forests04)
  str(forests04)
&nbsp;
  'data.frame':	15 obs. of  12 variables:
  $ geographic.Unit                     : Factor w/ 15 levels &quot;be1 Région de Bruxelles-Capitale/Brussels Hoofdstedelijk Gewest&quot;,..: 15 1 4 2 5 6 7 8 9 3 ...
...</pre>

</div>
<!-- EDIT25 SECTION "More examples" [25397-27796] -->
<h2 class="sectionedit26" id="functions">Functions</h2>
<div class="level2">

<p>
Functions are themselves objects in R which can be stored in the project&#039;s workspace. This provides a simple and convenient way to extend R. <br/>

Usage: in writing your own function you provide one or more arguments or names for the function,  an expression (or body of the function) and a value is produced equal to the output function result
</p>

<p>
<strong>function(arglist) expr</strong> <em>function definition</em> <br/>

<strong>return(value)</strong><br/>

</p>

<p>
Example
</p>
<pre class="code r">myfunction &lt;- function(x) x^5
myfunction(3)
243
&nbsp;
body(myfunction) &lt;- quote(5^x)
## or equivalently  body(myfunction) &lt;- expression(5^x)
myfunction(3) 
[1] 125
body(myfunction)
5^x
myfunction
function (x) 
5^x</pre>

</div>
<!-- EDIT26 SECTION "Functions" [27797-] -->