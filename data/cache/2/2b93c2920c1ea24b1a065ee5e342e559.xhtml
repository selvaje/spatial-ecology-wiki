
<h1 class="sectionedit1" id="comparing_frequency_distributions_of_bioclimatic_environmental_variables_in_norway_and_sweden">Comparing frequency distributions of bioclimatic environmental variables in Norway and Sweden</h1>
<div class="level1">

<p>
Name?
Affiliation? 
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Comparing frequency distributions of bioclimatic environmental variables in Norway and Sweden&quot;,&quot;hid&quot;:&quot;comparing_frequency_distributions_of_bioclimatic_environmental_variables_in_norway_and_sweden&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:1,&quot;range&quot;:&quot;1-129&quot;} -->
<h2 class="sectionedit2" id="introduction">INTRODUCTION</h2>
<div class="level2">

<p>
Distribution of many insect species in Norway is poorly known, particularly in comparison to adjacent countries, e.g. Sweden. Many species are represented in Norwegian collections by very few specimens originating from a small number of localities close to where their collectors live(d). To some extent, the problem of lack of data about detailed distribution of a species in Norway can be mitigated by modelling the distribution of that species using the few records already available. An alternative approach could be to use projective modelling. A model of the species distribution can be trained using a dataset from the region where the distribution of the species is known well (e.g. Sweden) and then projected on the region where the distribution of the species is known poorly (i.e. Norway). Of course, this approach may work well only if the two regions, the one used to train the model, and the one used to project the model on, are similar in their environmental conditions. In my project I would like to assess the overlap in environmental conditions between Norway and Sweden. 
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;INTRODUCTION&quot;,&quot;hid&quot;:&quot;introduction&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:2,&quot;range&quot;:&quot;130-1246&quot;} -->
<h3 class="sectionedit3" id="general_framework_of_the_analysis">General framework of the analysis</h3>
<div class="level3">

<p>
<strong>Background.</strong> In my exercise project I would like to compare how significant the overlap between the environmental conditions in Sweden and Norway is, and which parts of Norway fall within the range of environmental conditions that are present in Sweden. Based on that comparison between the environmental space of Sweden and Norway, I would like to identify the parts of Norway where species distribution can be predicted based on the models trained on Swedish data.
</p>

<p>
<strong>Keywords:</strong> Worldclim data, bioclimatic variables, species distribution modelling, environmental space.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;General framework of the analysis&quot;,&quot;hid&quot;:&quot;general_framework_of_the_analysis&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:3,&quot;range&quot;:&quot;1247-1869&quot;} -->
<h3 class="sectionedit4" id="project_objectives">Project objectives</h3>
<div class="level3">

<p>
Compare frequency distribution for bioclimatic environmental variables in Norway and Sweden.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Project objectives&quot;,&quot;hid&quot;:&quot;project_objectives&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:4,&quot;range&quot;:&quot;1870-1992&quot;} -->
<h2 class="sectionedit5" id="metadata">METADATA</h2>
<div class="level2">

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;METADATA&quot;,&quot;hid&quot;:&quot;metadata&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:5,&quot;range&quot;:&quot;1993-2015&quot;} -->
<h3 class="sectionedit6" id="vector_data">Vector data</h3>
<div class="level3">

<p>
Gridded Population of the World (GPW), v3 <a href="http://sedac.ciesin.columbia.edu/data/collection/gpw-v3" class="urlextern" target="blanc" title="http://sedac.ciesin.columbia.edu/data/collection/gpw-v3" rel="nofollow noopener">http://sedac.ciesin.columbia.edu/data/collection/gpw-v3</a>. National Administrative boundaries.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Vector data&quot;,&quot;hid&quot;:&quot;vector_data&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:6,&quot;range&quot;:&quot;2016-2178&quot;} -->
<h3 class="sectionedit7" id="raster_data">Raster data</h3>
<div class="level3">

<p>
WorldClim dataset <a href="http://www.worldclim.org/" class="urlextern" target="blanc" title="http://www.worldclim.org/" rel="nofollow noopener">http://www.worldclim.org/</a>. 
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Raster data&quot;,&quot;hid&quot;:&quot;raster_data&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:7,&quot;range&quot;:&quot;2179-2253&quot;} -->
<h3 class="sectionedit8" id="other_data_sources">Other data sources</h3>
<div class="level3">

<p>
None.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Other data sources&quot;,&quot;hid&quot;:&quot;other_data_sources&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:8,&quot;range&quot;:&quot;2254-2290&quot;} -->
<h2 class="sectionedit9" id="method">METHOD</h2>
<div class="level2">

<p>
1) I downloaded the needed parts of the WorldClim datasets (at 30“ resolution; tiles 06, 07 and 16 cover Norway, and tiles 06 and 16 cover Sweden) in GeoTIFF format from <a href="http://www.worldclim.org/tiles.php" class="urlextern" target="blanc" title="http://www.worldclim.org/tiles.php" rel="nofollow noopener">http://www.worldclim.org/tiles.php</a>. I saved the data in the catalogue /home/user/My<em>project/Bioclim</em>data/ as bioAA<em>BB.tif, where AA is the bioclim variable number, BB is the tile number, e.g. bio12</em>06.tif.
</p>

<p>
2) I checked the projection of bioAA_BB.tif (all files should have the same projection):
</p>
<pre class="code gdal">gdalinfo /home/user/My_project/Bioclim_data/bio12_06.tif</pre>

<p>
I got the following:
</p>
<pre class="code">Driver: GTiff/GeoTIFF
Files: /home/user/My_project/Bioclim_data/bio12_06.tif
       /home/user/My_project/Bioclim_data/bio12_06.tif.aux.xml
Size is 3600, 3600
Coordinate System is:
GEOGCS[&quot;WGS 84&quot;,
    DATUM[&quot;WGS_1984&quot;,
        SPHEROID[&quot;WGS 84&quot;,6378137,298.257223563,
            AUTHORITY[&quot;EPSG&quot;,&quot;7030&quot;]],
        AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]],
    PRIMEM[&quot;Greenwich&quot;,0],
    UNIT[&quot;degree&quot;,0.0174532925199433],
    AUTHORITY[&quot;EPSG&quot;,&quot;4326&quot;]]
Origin = (0.000000000000000,90.000000000000000)
Pixel Size = (0.008333333333333,-0.008333333333333)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  COMPRESSION=LZW
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (   0.0000000,  90.0000000) (  0d 0&#039; 0.01&quot;E, 90d 0&#039; 0.00&quot;N)
Lower Left  (   0.0000000,  60.0000000) (  0d 0&#039; 0.01&quot;E, 60d 0&#039; 0.00&quot;N)
Upper Right (  30.0000000,  90.0000000) ( 30d 0&#039; 0.00&quot;E, 90d 0&#039; 0.00&quot;N)
Lower Right (  30.0000000,  60.0000000) ( 30d 0&#039; 0.00&quot;E, 60d 0&#039; 0.00&quot;N)
Center      (  15.0000000,  75.0000000) ( 15d 0&#039; 0.00&quot;E, 75d 0&#039; 0.00&quot;N)
Band 1 Block=3600x1 Type=Float32, ColorInterp=Gray
  Min=207.000 Max=2958.000 
  Minimum=207.000, Maximum=2958.000, Mean=0.000, StdDev=0.000
  NoData Value=-3.39999999999999996e+38
  Metadata:
    STATISTICS_MAXIMUM=2958
    STATISTICS_MEAN=0
    STATISTICS_MINIMUM=207
    STATISTICS_STDDEV=0</pre>

<p>
EPSG 4326 describes the dataset.
</p>

<p>
3) I downloaded the shapefile with the world national administrative boundaries (Gridded Population of the World (GPW), v3) at <a href="http://sedac.ciesin.columbia.edu/data/set/gpw-v3-national-admin-boundaries/data-download" class="urlextern" target="blanc" title="http://sedac.ciesin.columbia.edu/data/set/gpw-v3-national-admin-boundaries/data-download" rel="nofollow noopener">http://sedac.ciesin.columbia.edu/data/set/gpw-v3-national-admin-boundaries/data-download</a>. I selected the following: Region: Global, Data Set: National Boundaries, Data Attributes: .shp and circa 2000. I saved the downloaded file in /home/user/My<em>project/Vector/ as /home/user/My</em>project/Vector/nat_bound.shp.
</p>

<p>
The dataset has the following Spatial Reference Metadata (<a href="http://sedac.ciesin.columbia.edu/data/set/gpw-v3-national-admin-boundaries/metadata" class="urlextern" target="blanc" title="http://sedac.ciesin.columbia.edu/data/set/gpw-v3-national-admin-boundaries/metadata" rel="nofollow noopener">http://sedac.ciesin.columbia.edu/data/set/gpw-v3-national-admin-boundaries/metadata</a>):
</p>
<pre class="code">    Horizontal Coordinate System Definition:
        Geographic:
            Latitude Resolution: 0.000000
            Longitude Resolution: 0.000000
            Geographic Coordinate Units: Decimal degrees
        Geodetic Model:
            Horizontal Datum Name: WGS84
            Ellipsoid Name: WGS84
            Semi-major Axis: 6378137.000000
            Denominator of Flattening Ratio: 298.257224</pre>

<p>
This matches the EPSG 4326 in the Worldclim GeoTIFFs. No reprojection is required.
</p>

<p>
4) I opened the shapefile /home/user/My<em>project/Vector/nat</em>bound.shp in QGIS. I selected national boundaries of Norway and Sweden and saved selections as /home/user/My<em>project/Vector/Norway.shp and /home/user/My</em>project/Vector/Sweden.shp, respectively.
</p>

<p>
5) I masked WorldClim data using two country shapefiles. The following is the code to process Bioclim variable 12:
</p>
<dl class="code">
<dt><a href="/dokuwiki/doku.php?do=export_code&amp;id=wikistudholland:utwente_vladimir&amp;codeblock=3" title="Download Snippet" class="mediafile mf_">-my code</a></dt>
<dd><pre class="code gdal">gdalwarp -q -cutline /home/user/My_project/Vector/Norway.shp -crop_to_cutline -of GTiff /home/user/My_project/Bioclim_data/bio12_06.tif /home/user/My_project/Raster/bio12_06_masked_Norway.tif
gdalwarp -q -cutline /home/user/My_project/Vector/Norway.shp -crop_to_cutline -of GTiff /home/user/My_project/Bioclim_data/bio12_07.tif /home/user/My_project/Raster/bio12_07_masked_Norway.tif
gdalwarp -q -cutline /home/user/My_project/Vector/Norway.shp -crop_to_cutline -of GTiff /home/user/My_project/Bioclim_data/bio12_16.tif /home/user/My_project/Raster/bio12_16_masked_Norway.tif
gdalwarp -q -cutline /home/user/My_project/Vector/Sweden.shp -crop_to_cutline -of GTiff /home/user/My_project/Bioclim_data/bio12_06.tif /home/user/My_project/Raster/bio12_06_masked_Sweden.tif
gdalwarp -q -cutline /home/user/My_project/Vector/Sweden.shp -crop_to_cutline -of GTiff /home/user/My_project/Bioclim_data/bio12_16.tif /home/user/My_project/Raster/bio12_16_masked_Sweden.tif</pre>
</dd></dl>

<p>
The code above masked parts of the two countries, by tile. The results were saved in /home/user/My<em>project/Raster/ as bioAA</em>BB<em>masked</em>COUNTRY.tif, where AA is the bioclim variable number, BB is the tile number, COUNTRY is either Norway or Sweden, e.g. bio12<em>06</em>masked_Norway.tif.
</p>

<p>
6) I merged all the tif files with different parts of Norway (Sweden) in a single tif file.
</p>
<dl class="code">
<dt><a href="/dokuwiki/doku.php?do=export_code&amp;id=wikistudholland:utwente_vladimir&amp;codeblock=4" title="Download Snippet" class="mediafile mf_">-my code</a></dt>
<dd><pre class="code pktools">pkmosaic -i /home/user/My_project/Raster/bio12_06_masked_Sweden.tif -i /home/user/My_project/Raster/bio12_16_masked_Sweden.tif -o /home/user/My_project/Raster/bio12_masked_Sweden_merged.tif
pkmosaic -i /home/user/My_project/Raster/bio12_06_masked_Norway.tif -i /home/user/My_project/Raster/bio12_07_masked_Norway.tif -i /home/user/My_project/Raster/bio12_16_masked_Norway.tif -o /home/user/My_project/Raster/bio12_masked_Norway_merged.tif</pre>
</dd></dl>

<p>
7) Frequency distributions of the environmental variables (histograms) were obtained for every tif file using <abbr title="Graphical User Interface">GUI</abbr> in QGIS.
</p>

<p>
8) An alternative to steps 5) and 6) above is to merge the WorldClim tiles first and then apply two country masks. The code is shorter but at one stage the files are larger.
</p>
<dl class="code">
<dt><a href="/dokuwiki/doku.php?do=export_code&amp;id=wikistudholland:utwente_vladimir&amp;codeblock=5" title="Download Snippet" class="mediafile mf_">-my code 2</a></dt>
<dd><pre class="code pktoolsgdal">pkmosaic -i /home/user/My_project/Bioclim_data/bio12_06.tif -i /home/user/My_project/Bioclim_data/bio12_07.tif -i /home/user/My_project/Bioclim_data/bio12_16.tif -o /home/user/My_project/Raster/bio12_merged.tif
gdalwarp -q -cutline /home/user/My_project/Vector/Norway.shp -crop_to_cutline -of GTiff /home/user/My_project/Raster/bio12_merged.tif /home/user/My_project/Raster/bio12_masked_Norway.tif
gdalwarp -q -cutline /home/user/My_project/Vector/Sweden.shp -crop_to_cutline -of GTiff /home/user/My_project/Raster/bio12_merged.tif /home/user/My_project/Raster/bio12_masked_Sweden.tif</pre>
</dd></dl>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;METHOD&quot;,&quot;hid&quot;:&quot;method&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:9,&quot;range&quot;:&quot;2291-8463&quot;} -->
<h2 class="sectionedit10" id="computational_implementation">Computational implementation</h2>
<div class="level2">

<p>
Some further explanation of the overall analyses and of each step
paste your code here
</p>
<dl class="code">
<dt><a href="/dokuwiki/doku.php?do=export_code&amp;id=wikistudholland:utwente_vladimir&amp;codeblock=6" title="Download Snippet" class="mediafile mf_">- my code</a></dt>
<dd><pre class="code gdalpktools"># masking every tile downloaded from WorlClim dataset using the boundaries of Norway (3 tiles) and Sweden (2 tiles) 
gdalwarp -q -cutline /home/user/My_project/Vector/Norway.shp -crop_to_cutline -of GTiff /home/user/My_project/Bioclim_data/bio12_06.tif /home/user/My_project/Raster/bio12_06_masked_Norway.tif
gdalwarp -q -cutline /home/user/My_project/Vector/Norway.shp -crop_to_cutline -of GTiff /home/user/My_project/Bioclim_data/bio12_07.tif /home/user/My_project/Raster/bio12_07_masked_Norway.tif
gdalwarp -q -cutline /home/user/My_project/Vector/Norway.shp -crop_to_cutline -of GTiff /home/user/My_project/Bioclim_data/bio12_16.tif /home/user/My_project/Raster/bio12_16_masked_Norway.tif
gdalwarp -q -cutline /home/user/My_project/Vector/Sweden.shp -crop_to_cutline -of GTiff /home/user/My_project/Bioclim_data/bio12_06.tif /home/user/My_project/Raster/bio12_06_masked_Sweden.tif
gdalwarp -q -cutline /home/user/My_project/Vector/Sweden.shp -crop_to_cutline -of GTiff /home/user/My_project/Bioclim_data/bio12_16.tif /home/user/My_project/Raster/bio12_16_masked_Sweden.tif
# merging all tif files with different parts of Norway (Sweden) in a single tif file for each country
pkmosaic -i /home/user/My_project/Raster/bio12_06_masked_Sweden.tif -i /home/user/My_project/Raster/bio12_16_masked_Sweden.tif -o /home/user/My_project/Raster/bio12_masked_Sweden_merged.tif
pkmosaic -i /home/user/My_project/Raster/bio12_06_masked_Norway.tif -i /home/user/My_project/Raster/bio12_07_masked_Norway.tif -i /home/user/My_project/Raster/bio12_16_masked_Norway.tif -o /home/user/My_project/Raster/bio12_masked_Norway_merged.tif</pre>
</dd></dl>

<p>
Describe your second code if needed, what it does …
</p>
<dl class="code">
<dt><a href="/dokuwiki/doku.php?do=export_code&amp;id=wikistudholland:utwente_vladimir&amp;codeblock=7" title="Download Snippet" class="mediafile mf_">- my code 2</a></dt>
<dd><pre class="code pktoolsgdal"># my alternative code here
# merging three tiles of the WorldClim dataset for bioclimatic variable 12
pkmosaic -i /home/user/My_project/Bioclim_data/bio12_06.tif -i /home/user/My_project/Bioclim_data/bio12_07.tif -i /home/user/My_project/Bioclim_data/bio12_16.tif -o /home/user/My_project/Raster/bio12_merged.tif
# applying the mask for Norway
gdalwarp -q -cutline /home/user/My_project/Vector/Norway.shp -crop_to_cutline -of GTiff /home/user/My_project/Raster/bio12_merged.tif /home/user/My_project/Raster/bio12_masked_Norway.tif
# applying the mask for Sweden
gdalwarp -q -cutline /home/user/My_project/Vector/Sweden.shp -crop_to_cutline -of GTiff /home/user/My_project/Raster/bio12_merged.tif /home/user/My_project/Raster/bio12_masked_Sweden.tif</pre>
</dd></dl>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Computational implementation&quot;,&quot;hid&quot;:&quot;computational_implementation&quot;,&quot;codeblockOffset&quot;:6,&quot;secid&quot;:10,&quot;range&quot;:&quot;8464-11093&quot;} -->
<h3 class="sectionedit11" id="model_parametrization">Model parametrization</h3>
<div class="level3">

<p>
N/A.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Model parametrization&quot;,&quot;hid&quot;:&quot;model_parametrization&quot;,&quot;codeblockOffset&quot;:8,&quot;secid&quot;:11,&quot;range&quot;:&quot;11094-11131&quot;} -->
<h3 class="sectionedit12" id="model_prediction">Model prediction</h3>
<div class="level3">

<p>
N/A.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Model prediction&quot;,&quot;hid&quot;:&quot;model_prediction&quot;,&quot;codeblockOffset&quot;:8,&quot;secid&quot;:12,&quot;range&quot;:&quot;11132-11164&quot;} -->
<h3 class="sectionedit13" id="validation">Validation</h3>
<div class="level3">

<p>
N/A.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Validation&quot;,&quot;hid&quot;:&quot;validation&quot;,&quot;codeblockOffset&quot;:8,&quot;secid&quot;:13,&quot;range&quot;:&quot;11165-11192&quot;} -->
<h2 class="sectionedit14" id="results_and_discussion">RESULTS and DISCUSSION</h2>
<div class="level2">

<p>
Show us the output of the analyses upload images if needed with “add images” link in the upper bar of this window while editing
</p>
<ul>
<li class="level1"><div class="li">Map 1. Distribution of Bioclim12 variable (annual precipitation) in Norway. 
<a href="/dokuwiki/lib/exe/detail.php?id=wikistudholland%3Autwente_vladimir&amp;media=wikistudholland:bio12_masked_norway_merged.png" class="media" title="wikistudholland:bio12_masked_norway_merged.png"><img src="/dokuwiki/lib/exe/fetch.php?media=wikistudholland:bio12_masked_norway_merged.png" class="media" alt="" /></a>
</div>
</li>
<li class="level1"><div class="li">Map 2. Distribution of Bioclim12 variable (annual precipitation) in Sweden. 
<a href="/dokuwiki/lib/exe/detail.php?id=wikistudholland%3Autwente_vladimir&amp;media=wikistudholland:bio12_masked_sweden_merged.png" class="media" title="wikistudholland:bio12_masked_sweden_merged.png"><img src="/dokuwiki/lib/exe/fetch.php?media=wikistudholland:bio12_masked_sweden_merged.png" class="media" alt="" /></a>
</div>
</li>
<li class="level1"><div class="li">Histogram 1. Frequency distribution of Bioclim12 variable (annual precipitation) in Norway. 
<a href="/dokuwiki/lib/exe/detail.php?id=wikistudholland%3Autwente_vladimir&amp;media=wikistudholland:bio12_masked_norway_merged.jpeg" class="media" title="wikistudholland:bio12_masked_norway_merged.jpeg"><img src="/dokuwiki/lib/exe/fetch.php?media=wikistudholland:bio12_masked_norway_merged.jpeg" class="media" alt="" /></a>
</div>
</li>
<li class="level1"><div class="li">Histogram 2. Frequency distribution of Bioclim12 variable (annual precipitation) in Sweden. 
<a href="/dokuwiki/lib/exe/detail.php?id=wikistudholland%3Autwente_vladimir&amp;media=wikistudholland:bio12_masked_sweden_merged.jpeg" class="media" title="wikistudholland:bio12_masked_sweden_merged.jpeg"><img src="/dokuwiki/lib/exe/fetch.php?media=wikistudholland:bio12_masked_sweden_merged.jpeg" class="media" alt="" /></a></div>
</li>
</ul>

<p>
<em>Later on after the training you could improve the script and upgrade your wiki project page</em>
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;RESULTS and DISCUSSION&quot;,&quot;hid&quot;:&quot;results_and_discussion&quot;,&quot;codeblockOffset&quot;:8,&quot;secid&quot;:14,&quot;range&quot;:&quot;11193-&quot;} -->