
<h3 class="sectionedit1" id="urban_and_peri-urban_tree_cover_in_european_citiescurrent_distribution_and_future_vulnerability_under_climate_change_scenarios">Urban and Peri-Urban Tree Cover in European Cities: Current Distribution and Future Vulnerability Under Climate Change Scenarios.</h3>
<div class="level3">

<p>
Casalegno S. 2011. Urban and Peri-Urban Tree Cover in European Cities: Current Distribution and Future Vulnerability Under Climate Change Scenarios. In: Global warming impacts: case studies on the economy, human health, and on urban and natural environments. Editor:  S. Casalegno. Intech Open Access Publisher. <a href="http://www.intechopen.com/books/show/title/global-warming-impacts-case-studies-on-the-economy-human-health-and-on-urban-and-natural-environments" class="urlextern" target="blanc" title="http://www.intechopen.com/books/show/title/global-warming-impacts-case-studies-on-the-economy-human-health-and-on-urban-and-natural-environments" rel="nofollow noopener">ISBN 978-953-307-785-7</a>.  <br/>

</p>
<pre class="code bash"><span class="co0"># #!/bin/bash</span>
<span class="co0">#</span>
<span class="co0"># Angera June 2011</span>
<span class="co0"># # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #</span>
<span class="co0"># </span>
<span class="co0"># Author: Stefano Casalegno</span>
<span class="co0"># </span>
<span class="co0"># FBK MPBA research unit: Predictive Models for Biomedicine &amp; Environment, Trento Italy</span>
<span class="co0"># </span>
&nbsp;
<span class="co0">##########################################################################</span>
<span class="co0"># Download CORINE Land cover from EEA</span>
<span class="co0"># http://www.eea.europa.eu/data-and-maps/data</span>
<span class="co0"># Corine Land Cover (clc) 2000 raster data, resolution 100 m (g100_06.zip, ZIP archive 101.46 MB)</span>
<span class="co0"># Legends :: clc_legend.csv (Plain Text  3.88 KB) </span>
<span class="co0"># /data-and-maps/data/ga-downloads/SH04UZP80M/corine-land-cover-2006-raster/clc_legend.csv</span>
<span class="co0">#</span>
<span class="co0"># Download</span>
<span class="kw2">mkdir</span> ~<span class="sy0">/</span>tmpDWNLOAD
<span class="kw2">wget</span> <span class="re5">-O</span> ~<span class="sy0">/</span>tmpDWNLOAD<span class="sy0">/</span>g100_00.zip <span class="st0">&quot;http://www.eea.europa.eu/data-and-maps/data/corine-land-cover-2006-raster/clc-2006-100m/g100_00.zip/at_download/file&quot;</span>
<span class="co0"># unzip data</span>
<span class="kw2">unzip</span> ~<span class="sy0">/</span>tmpDWNLOAD<span class="sy0">/</span>g100_00.zip 
&nbsp;
&nbsp;
<span class="co0"># Create a working directory at your choice:</span>
<span class="kw2">mkdir</span> <span class="sy0">/</span>home<span class="sy0">/</span>ste<span class="sy0">/</span>work<span class="sy0">/</span>GlobalWarming_Intech<span class="sy0">/</span>mypaper<span class="sy0">/</span>UFO
&nbsp;
<span class="co0"># Create a New Grass project using LAEA projection EPSG:3035;</span>
<span class="co0"># GRASSDB: grassdbwv</span>
<span class="co0"># Grass Location:LAEA</span>
<span class="co0"># GRASS Mapset UFO</span>
<span class="co0"># You need to have the bash script create_location.sh saved in your &quot;~/ost4sem/&quot; folder</span>
<span class="kw3">cd</span> ~<span class="sy0">/</span>ost4sem<span class="sy0">/</span>
<span class="kw2">cp</span> ~<span class="sy0">/</span>tmpDWNLOAD<span class="sy0">/</span>g100_00<span class="sy0">/</span>g100_00.tif ~<span class="sy0">/</span>ost4sem<span class="sy0">/</span>g100_00.tif
<span class="kw2">bash</span>  create_location.sh g100_00.tif LAEA  ~<span class="sy0">/</span>ost4sem<span class="sy0">/</span>grassdbwv<span class="sy0">/</span>
<span class="kw2">rm</span> ~<span class="sy0">/</span>ost4sem<span class="sy0">/</span>g100_00.tif
<span class="kw3">cd</span> <span class="sy0">/</span>home<span class="sy0">/</span>ste<span class="sy0">/</span>work<span class="sy0">/</span>GlobalWarming_Intech<span class="sy0">/</span>mypaper<span class="sy0">/</span>UFO
<span class="co0"># Start grass in text mode</span>
grass <span class="re5">-text</span> <span class="sy0">/</span>home<span class="sy0">/</span>ste<span class="sy0">/</span>ost4sem<span class="sy0">/</span>grassdbwv<span class="sy0">/</span>LAEA<span class="sy0">/</span>PERMANENT 
g.mapset <span class="re2">mapset</span>=UFO <span class="re5">-c</span>
&nbsp;
&nbsp;
<span class="co0"># Import Corine in Grass</span>
r.in.gdal <span class="re5">-o</span> <span class="re2">input</span>=~<span class="sy0">/</span>data10<span class="sy0">/</span>EEA<span class="sy0">/</span>corine_LC_2000_100m<span class="sy0">/</span>g100_00.tif <span class="re2">output</span>=clc <span class="re5">--overwrite</span>
<span class="co0"># g.region rast=clc</span>
<span class="co0"># r.mapcalc water = &quot;if( clc == 44 || clc == 43 ||  clc == 40 , 0 , 1)&quot;</span>
<span class="co0"># r.mask -o input=water maskcats=1</span>
&nbsp;
<span class="co0">###############################################################################</span>
<span class="co0"># Download Urban Morphological Zones Raster Data from EEA Raster 100m and 250m</span>
<span class="co0"># Urban morphological zones (UMZ) are defined by Corine land cover classes considered to contribute to the urban tissue and function</span>
<span class="co0">#     DATA: UMZ2000_f3v0_raster.zip (ZIP archive)</span>
<span class="co0">#     SIZE:  32.63 MB </span>
<span class="co0"># Web site http://www.eea.europa.eu/data-and-maps</span>
<span class="kw2">mkdir</span> ~<span class="sy0">/</span>tmpDWNLOAD
<span class="kw2">wget</span> <span class="re5">-O</span> ~<span class="sy0">/</span>tmpDWNLOAD<span class="sy0">/</span>UMZ2000.zip <span class="st0">&quot;http://www.eea.europa.eu/data-and-maps/data/urban-morphological-zones-2000-umz2000-f1v0-1/zipped-tiff-files-100m-and-25/zipped-tiff-files-100m-and-25/at_download/file&quot;</span>
<span class="co0"># unzip data</span>
<span class="kw2">unzip</span> ~<span class="sy0">/</span>tmpDWNLOAD<span class="sy0">/</span>UMZ2000.zip <span class="re5">-d</span> ~<span class="sy0">/</span>data10<span class="sy0">/</span>EEA<span class="sy0">/</span>UMZ<span class="sy0">/</span>UMZ2000<span class="sy0">/</span>UMZ2000_100m.tif
&nbsp;
&nbsp;
<span class="co0"># Imprort Urban Morphological Zones in Grass</span>
r.in.gdal <span class="re2">input</span>=<span class="sy0">/</span>home<span class="sy0">/</span>ste<span class="sy0">/</span>data10<span class="sy0">/</span>EEA<span class="sy0">/</span>UMZ<span class="sy0">/</span>UMZ2000<span class="sy0">/</span>UMZ2000_100m.tif <span class="re2">output</span>=UMZ_100m
<span class="co0"># r.mapcalc UMZ_100m = UMZ_100m</span>
&nbsp;
&nbsp;
<span class="co0">###############################################################################</span>
<span class="co0"># Download 100m resolution Forest Non Forest Map from Joint Research Centre</span>
<span class="co0"># see: http://forest.jrc.ec.europa.eu/forestmap-download</span>
<span class="kw1">for</span> tile <span class="kw1">in</span> <span class="nu0">21</span> <span class="nu0">22</span> <span class="nu0">23</span> <span class="nu0">31</span> <span class="nu0">32</span> <span class="nu0">33</span> <span class="nu0">41</span> <span class="nu0">42</span> <span class="nu0">43</span> <span class="nu0">44</span> <span class="nu0">45</span> <span class="nu0">51</span> <span class="nu0">52</span> <span class="nu0">53</span> <span class="nu0">54</span> <span class="nu0">55</span> <span class="nu0">61</span> <span class="nu0">62</span> <span class="nu0">72</span> ; <span class="kw1">do</span>
<span class="kw2">wget</span> <span class="re5">-O</span> ~<span class="sy0">/</span>tmpDWNLOAD<span class="sy0">/</span> <span class="st0">&quot;http://geohub.jrc.ec.europa.eu/forest/forest-map/2000/tile<span class="es2">$tile</span>.zip&quot;</span>
<span class="kw2">unzip</span> ~<span class="sy0">/</span>tmpDWNLOAD<span class="sy0">/</span>tile<span class="re1">$tile</span>.zip  
<span class="kw1">done</span>
&nbsp;
<span class="co0"># merge tiles</span>
gdalwarp ~<span class="sy0">/</span>tmpDWNLOAD<span class="sy0">/</span>tile<span class="sy0">*</span>    ~<span class="sy0">/</span>tmpDWNLOAD<span class="sy0">/</span>FOR_2000_CM_FMAP_4500025000.tif
&nbsp;
<span class="co0"># import forest non forest map into grass</span>
r.in.gdal <span class="re5">-o</span> <span class="re2">input</span>=~<span class="sy0">/</span>tmpDWNLOAD<span class="sy0">/</span>FOR_2000_CM_FMAP_4500025000.tif <span class="re2">output</span>=FMAP2000 <span class="re5">--overwrite</span>
<span class="co0"># r.mapcalc FMAP2000 = FMAP2000</span>
<span class="kw2">rm</span> ~<span class="sy0">/</span>tmpDWNLOAD<span class="sy0">/</span>tile<span class="sy0">*</span>
<span class="kw2">rm</span> ~<span class="sy0">/</span>tmpDWNLOAD<span class="sy0">/</span>FOR_2000_CM_FMAP_4500025000.tif
&nbsp;
&nbsp;
<span class="co0"># # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # </span>
<span class="co0"># Download Species suitability maps from Joint Research Centre</span>
<span class="co0"># See: http://forest.jrc.ec.europa.eu/climate-change</span>
<span class="co0"># http://efdac.jrc.ec.europa.eu/climate</span>
<span class="kw1">for</span> species <span class="kw1">in</span> ; <span class="nu0">134</span> <span class="nu0">51</span> <span class="nu0">46</span> <span class="nu0">125</span> <span class="kw1">do</span>
<span class="kw2">wget</span> <span class="re5">-O</span> ~<span class="sy0">/</span>tmpDWNLOAD<span class="sy0">/</span> <span class="st0">&quot;http://geohub.jrc.ec.europa.eu/forest/climatechange/suitability/sp'<span class="es2">$specie</span>'_suit_all.tar.gz&quot;</span>
<span class="kw2">unzip</span> ~<span class="sy0">/</span>tmpDWNLOAD<span class="sy0">/</span>sp<span class="st_h">'$specie'</span>_suit_all.tar.gz  
<span class="kw2">mv</span> ~<span class="sy0">/</span>tmpDWNLOAD<span class="sy0">/</span>sp<span class="st_h">'$specie'</span><span class="sy0">*</span>   ~<span class="sy0">/</span>data10<span class="sy0">/</span>JRC_data<span class="sy0">/</span>suitability_maps<span class="sy0">/</span>
<span class="kw1">done</span>
&nbsp;
<span class="kw1">for</span> <span class="kw1">time</span> <span class="kw1">in</span> ENS_A2a_2020b ENS_A2a_2050b ENS_A2a_2080b PRESENT ; <span class="kw1">do</span>
r.in.gdal <span class="re5">-o</span> <span class="re2">input</span>=<span class="sy0">/</span>home<span class="sy0">/</span>ste<span class="sy0">/</span>data10<span class="sy0">/</span>JRC_data<span class="sy0">/</span>suitability_maps<span class="sy0">/</span><span class="re1">$time</span><span class="sy0">/</span>map_C_134.tif <span class="re2">output</span>=<span class="re1">$time</span><span class="st0">&quot;_p_sylv&quot;</span> <span class="re5">--overwrite</span>
r.in.gdal <span class="re5">-o</span> <span class="re2">input</span>=<span class="sy0">/</span>home<span class="sy0">/</span>ste<span class="sy0">/</span>data10<span class="sy0">/</span>JRC_data<span class="sy0">/</span>suitability_maps<span class="sy0">/</span><span class="re1">$time</span><span class="sy0">/</span>map_C_51.tif <span class="re2">output</span>=<span class="re1">$time</span><span class="st0">&quot;_q_robur&quot;</span> <span class="re5">--overwrite</span>
r.in.gdal <span class="re5">-o</span> <span class="re2">input</span>=<span class="sy0">/</span>home<span class="sy0">/</span>ste<span class="sy0">/</span>data10<span class="sy0">/</span>JRC_data<span class="sy0">/</span>suitability_maps<span class="sy0">/</span><span class="re1">$time</span><span class="sy0">/</span>map_C_46.tif <span class="re2">output</span>=<span class="re1">$time</span><span class="st0">&quot;_q_ilex&quot;</span> <span class="re5">--overwrite</span>
r.in.gdal <span class="re5">-o</span> <span class="re2">input</span>=<span class="sy0">/</span>home<span class="sy0">/</span>ste<span class="sy0">/</span>data10<span class="sy0">/</span>JRC_data<span class="sy0">/</span>suitability_maps<span class="sy0">/</span><span class="re1">$time</span><span class="sy0">/</span>map_C_125.tif <span class="re2">output</span>=<span class="re1">$time</span><span class="st0">&quot;_p_halep&quot;</span> <span class="re5">--overwrite</span>
<span class="kw1">done</span>
&nbsp;
<span class="co0"># # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # </span>
<span class="co0"># Set your region of interest</span>
<span class="co0"># g.region n=2465000 s=2393000 w=4108000 e=4168000 res=100 save=torino --o</span>
g.region <span class="re2">n</span>=<span class="nu0">2915100</span> <span class="re2">s</span>=<span class="nu0">2858600</span> <span class="re2">w</span>=<span class="nu0">3726300</span> <span class="re2">e</span>=<span class="nu0">3789900</span> <span class="re2">res</span>=<span class="nu0">100</span> <span class="re2">save</span>=paris <span class="re5">--o</span>
g.region <span class="re2">n</span>=<span class="nu0">3233000</span> <span class="re2">s</span>=<span class="nu0">3177000</span> <span class="re2">w</span>=<span class="nu0">3587000</span> <span class="re2">e</span>=<span class="nu0">3651000</span> <span class="re2">res</span>=<span class="nu0">100</span> <span class="re2">save</span>=london <span class="re5">--o</span>
g.region <span class="re2">n</span>=<span class="nu0">2048000</span> <span class="re2">s</span>=<span class="nu0">2009000</span> <span class="re2">w</span>=<span class="nu0">3133000</span> <span class="re2">e</span>=<span class="nu0">3182000</span> <span class="re2">res</span>=<span class="nu0">100</span> <span class="re2">save</span>=madrid <span class="re5">--o</span>
g.region <span class="re2">n</span>=<span class="nu0">2109000</span> <span class="re2">s</span>=<span class="nu0">2073000</span> <span class="re2">w</span>=<span class="nu0">4508300</span> <span class="re2">e</span>=<span class="nu0">4554700</span> <span class="re2">res</span>=<span class="nu0">100</span> <span class="re2">save</span>=rome <span class="re5">--o</span>
g.region <span class="re2">n</span>=<span class="nu0">3292000</span> <span class="re2">s</span>=<span class="nu0">3247000</span> <span class="re2">w</span>=<span class="nu0">4525000</span> <span class="re2">e</span>=<span class="nu0">4582000</span> <span class="re2">res</span>=<span class="nu0">100</span> <span class="re2">save</span>=berlin <span class="re5">--o</span>
g.region <span class="re2">n</span>=<span class="nu0">3650000</span> <span class="re2">s</span>=<span class="nu0">3602000</span> <span class="re2">w</span>=<span class="nu0">4451000</span> <span class="re2">e</span>=<span class="nu0">4493000</span> <span class="re2">res</span>=<span class="nu0">100</span> <span class="re2">save</span>=copenhagen <span class="re5">--o</span>
g.region <span class="re2">n</span>=<span class="nu0">4237000</span> <span class="re2">s</span>=<span class="nu0">4195000</span> <span class="re2">w</span>=<span class="nu0">5119000</span> <span class="re2">e</span>=<span class="nu0">5160000</span> <span class="re2">res</span>=<span class="nu0">100</span> <span class="re2">save</span>=helsinki <span class="re5">--o</span>
g.region <span class="re2">n</span>=<span class="nu0">4078000</span> <span class="re2">s</span>=<span class="nu0">4025000</span> <span class="re2">w</span>=<span class="nu0">4751000</span> <span class="re2">e</span>=<span class="nu0">4820000</span> <span class="re2">res</span>=<span class="nu0">100</span> <span class="re2">save</span>=stockholm <span class="re5">--o</span>
g.region <span class="re2">n</span>=<span class="nu0">3112700</span> <span class="re2">s</span>=<span class="nu0">3073000</span> <span class="re2">w</span>=<span class="nu0">3904000</span> <span class="re2">e</span>=<span class="nu0">3949000</span> <span class="re2">res</span>=<span class="nu0">100</span> <span class="re2">save</span>=bruxelles <span class="re5">--o</span>
g.region <span class="re2">n</span>=<span class="nu0">3283000</span> <span class="re2">s</span>=<span class="nu0">3242000</span> <span class="re2">w</span>=<span class="nu0">3949900</span> <span class="re2">e</span>=<span class="nu0">3990000</span> <span class="re2">res</span>=<span class="nu0">100</span> <span class="re2">save</span>=amsterdam <span class="re5">--o</span>
g.region <span class="re2">n</span>=<span class="nu0">1977000</span> <span class="re2">s</span>=<span class="nu0">1926000</span> <span class="re2">w</span>=<span class="nu0">2636000</span> <span class="re2">e</span>=<span class="nu0">2693000</span> <span class="re2">res</span>=<span class="nu0">100</span> <span class="re2">save</span>=lisbon <span class="re5">--o</span>
g.region <span class="re2">n</span>=<span class="nu0">2825000</span> <span class="re2">s</span>=<span class="nu0">2788500</span> <span class="re2">w</span>=<span class="nu0">4770000</span> <span class="re2">e</span>=<span class="nu0">4817000</span> <span class="re2">res</span>=<span class="nu0">100</span> <span class="re2">save</span>=wien <span class="re5">--o</span>
g.region <span class="re2">n</span>=<span class="nu0">2780000</span> <span class="re2">s</span>=<span class="nu0">2727000</span> <span class="re2">w</span>=<span class="nu0">4978000</span> <span class="re2">e</span>=<span class="nu0">5030000</span> <span class="re2">res</span>=<span class="nu0">100</span> <span class="re2">save</span>=budapest <span class="re5">--o</span>
g.region <span class="re2">n</span>=<span class="nu0">3321700</span> <span class="re2">s</span>=<span class="nu0">3260600</span> <span class="re2">w</span>=<span class="nu0">5037000</span> <span class="re2">e</span>=<span class="nu0">5100000</span> <span class="re2">res</span>=<span class="nu0">100</span> <span class="re2">save</span>=warsaw <span class="re5">--o</span>
g.region <span class="re2">n</span>=<span class="nu0">1789000</span> <span class="re2">s</span>=<span class="nu0">1743000</span> <span class="re2">w</span>=<span class="nu0">5502000</span> <span class="re2">e</span>=<span class="nu0">5548000</span> <span class="re2">res</span>=<span class="nu0">100</span> <span class="re2">save</span>=athen <span class="re5">--o</span>
<span class="co0"># g.region n=3019000 s=2991600 w=4621000 e=4658000 res=100 save=prague --o</span>
&nbsp;
<span class="co0"># create a list of UMZ vectors per city</span>
<span class="re2">list</span>=<span class="sy0">`</span><span class="kw2">ls</span> <span class="sy0">/</span>home<span class="sy0">/</span>ste<span class="sy0">/</span>ost4sem<span class="sy0">/</span>grassdbwv<span class="sy0">/</span>LAEA<span class="sy0">/</span>UFO<span class="sy0">/</span>windows<span class="sy0">/`</span>
<span class="kw1">for</span> city <span class="kw1">in</span> <span class="re1">$list</span> ; <span class="kw1">do</span>
g.region <span class="re2">region</span>=<span class="re1">$city</span>
r.to.vect <span class="re5">-sv</span>  <span class="re2">input</span>=UMZ_100m <span class="re2">output</span>=UMZ<span class="re1">$city</span> <span class="re2">feature</span>=area <span class="re5">--overwrite</span> 
<span class="kw1">done</span>
&nbsp;
<span class="co0"># compute the statistics of urban greening, peri urban greening, total area, percentage green in urban and in peri urban</span>
<span class="kw2">rm</span> sum.txt
<span class="kw2">rm</span> PUsum.txt
<span class="re2">list</span>=<span class="sy0">`</span><span class="kw2">ls</span> <span class="sy0">/</span>home<span class="sy0">/</span>ste<span class="sy0">/</span>ost4sem<span class="sy0">/</span>grassdbwv<span class="sy0">/</span>LAEA<span class="sy0">/</span>UFO<span class="sy0">/</span>windows<span class="sy0">/`</span>
<span class="kw1">for</span> city <span class="kw1">in</span> <span class="re1">$list</span> ; <span class="kw1">do</span>
<span class="kw3">echo</span> <span class="re1">$city</span>
r.mask <span class="re5">-r</span>
g.region <span class="re2">region</span>=<span class="re1">$city</span>
r.mapcalc clc<span class="re1">$city</span>=clc
r.mapcalc water = <span class="st0">&quot;if( clc == 40 ||  clc == 41 ||  clc == 42 || clc == 43 || clc == 44 || clc == 32 ||  clc == 34, 0 , 1)&quot;</span>
r.mask <span class="re5">-o</span> <span class="re2">input</span>=water <span class="re2">maskcats</span>=<span class="nu0">1</span>
&nbsp;
r.mapcalc UMZ_<span class="re1">$city</span> = UMZ_100m
r.mapcalc FMAP_<span class="re1">$city</span> = FMAP2000
r.mapcalc UFOREST_<span class="re1">$city</span> = <span class="st0">&quot;if( UMZ_<span class="es2">$city</span> == 1, FMAP_<span class="es2">$city</span> , null())&quot;</span>
r.stats <span class="re5">-gn</span> <span class="re2">input</span>=UFOREST_<span class="re1">$city</span> <span class="re2">output</span>=uforest_<span class="re1">$city</span>.txt
<span class="kw2">awk</span> <span class="re5">-v</span> <span class="re2">city</span>=<span class="re1">$city</span>  <span class="st_h">'{ sum=sum+$3} END {print city , sum ,  NR , sum/NR }'</span>  uforest_<span class="re1">$city</span>.txt <span class="sy0">&gt;&gt;</span> sum.txt
&nbsp;
r.mapcalc PUFOREST_<span class="re1">$city</span> = <span class="st0">&quot;if( UMZ_<span class="es2">$city</span> == 0, FMAP_<span class="es2">$city</span> , null())&quot;</span>
r.stats <span class="re5">-gn</span> <span class="re2">input</span>=PUFOREST_<span class="re1">$city</span> <span class="re2">output</span>=PUforest_<span class="re1">$city</span>.txt
<span class="kw2">awk</span> <span class="re5">-v</span> <span class="re2">city</span>=<span class="re1">$city</span>  <span class="st_h">'{ sum=sum+$3} END {print city , sum ,  NR , sum/NR }'</span>  PUforest_<span class="re1">$city</span>.txt <span class="sy0">&gt;&gt;</span> PUsum.txt
<span class="kw1">done</span>
<span class="co0"># Add an index </span>
<span class="kw2">awk</span> <span class="st_h">' {  print NR , $0 }'</span> sum.txt <span class="sy0">&gt;</span> sum_id.txt 
<span class="kw2">awk</span> <span class="st_h">' {  print NR , $0 }'</span> PUsum.txt <span class="sy0">&gt;</span> PUsum_id.txt 
&nbsp;
<span class="co0"># Add a header</span>
<span class="kw2">awk</span> <span class="st_h">'BEGIN { print &quot;ID city UF U_tot pc_UF&quot;} { print $0 }'</span> sum_id.txt <span class="sy0">&gt;</span> sum_id_head.txt 
<span class="kw2">awk</span> <span class="st_h">'BEGIN { print &quot;ID city PUF PU_tot pc_PUF&quot;} { print $0 }'</span> PUsum_id.txt <span class="sy0">&gt;</span> PUsum_id_head.txt 
<span class="kw2">awk</span> <span class="st_h">'{gsub(/ /,&quot;,&quot;);print}'</span> PUsum_id_head.txt <span class="sy0">&gt;</span> ~<span class="sy0">/</span>work<span class="sy0">/</span>GlobalWarming_Intech<span class="sy0">/</span>mypaper<span class="sy0">/</span>UFO<span class="sy0">/</span>PUFstat.csv 
<span class="kw2">awk</span> <span class="st_h">'{gsub(/ /,&quot;,&quot;);print}'</span> sum_id_head.txt <span class="sy0">&gt;</span> ~<span class="sy0">/</span>work<span class="sy0">/</span>GlobalWarming_Intech<span class="sy0">/</span>mypaper<span class="sy0">/</span>UFO<span class="sy0">/</span>UFstat.csv
<span class="kw2">rm</span> <span class="sy0">*</span>.txt
&nbsp;
R  <span class="re5">--no-save</span>  <span class="re5">-q</span> <span class="sy0">&lt;</span>     ~<span class="sy0">/</span>work<span class="sy0">/</span>GlobalWarming_Intech<span class="sy0">/</span>mypaper<span class="sy0">/</span>scripts<span class="sy0">/</span>synt.R
&nbsp;
<span class="co0">## PLOT city maps with urban and periurban greening</span>
<span class="kw2">mkdir</span> <span class="sy0">/</span>home<span class="sy0">/</span>ste<span class="sy0">/</span>work<span class="sy0">/</span>GlobalWarming_Intech<span class="sy0">/</span>mypaper<span class="sy0">/</span>UFO<span class="sy0">/</span>output_png_maps<span class="sy0">/</span>
<span class="kw2">mkdir</span> ~<span class="sy0">/</span>work<span class="sy0">/</span>GlobalWarming_Intech<span class="sy0">/</span>mypaper<span class="sy0">/</span>UFO<span class="sy0">/</span>palett
<span class="kw3">echo</span> <span class="nu0">0</span> <span class="nu0">255</span>:<span class="nu0">153</span>:<span class="nu0">0</span> <span class="sy0">&gt;</span> ~<span class="sy0">/</span>work<span class="sy0">/</span>GlobalWarming_Intech<span class="sy0">/</span>mypaper<span class="sy0">/</span>UFO<span class="sy0">/</span>palett<span class="sy0">/</span>4cl_palet
<span class="kw3">echo</span> <span class="nu0">1</span> <span class="nu0">0</span>:<span class="nu0">53</span>:<span class="nu0">0</span> <span class="sy0">&gt;&gt;</span> ~<span class="sy0">/</span>work<span class="sy0">/</span>GlobalWarming_Intech<span class="sy0">/</span>mypaper<span class="sy0">/</span>UFO<span class="sy0">/</span>palett<span class="sy0">/</span>4cl_palet
<span class="kw3">echo</span> <span class="nu0">10</span> <span class="nu0">153</span>:<span class="nu0">51</span>:<span class="nu0">0</span> <span class="sy0">&gt;&gt;</span> ~<span class="sy0">/</span>work<span class="sy0">/</span>GlobalWarming_Intech<span class="sy0">/</span>mypaper<span class="sy0">/</span>UFO<span class="sy0">/</span>palett<span class="sy0">/</span>4cl_palet
<span class="kw3">echo</span> <span class="nu0">11</span> <span class="nu0">85</span>:<span class="nu0">255</span>:<span class="nu0">0</span> <span class="sy0">&gt;&gt;</span> ~<span class="sy0">/</span>work<span class="sy0">/</span>GlobalWarming_Intech<span class="sy0">/</span>mypaper<span class="sy0">/</span>UFO<span class="sy0">/</span>palett<span class="sy0">/</span>4cl_palet
&nbsp;
r.mask <span class="re5">-r</span>
<span class="re2">list</span>=<span class="sy0">`</span><span class="kw2">ls</span> <span class="sy0">/</span>home<span class="sy0">/</span>ste<span class="sy0">/</span>ost4sem<span class="sy0">/</span>grassdbwv<span class="sy0">/</span>LAEA<span class="sy0">/</span>UFO<span class="sy0">/</span>windows<span class="sy0">/`</span>
<span class="kw1">for</span> city <span class="kw1">in</span> <span class="re1">$list</span> ; <span class="kw1">do</span>
g.region <span class="re2">region</span>=<span class="re1">$city</span>
r.mapcalc <span class="st0">&quot;tmp_&quot;</span><span class="re1">$city</span> =  <span class="st0">&quot;UFOREST_&quot;</span><span class="re1">$city</span>+<span class="nu0">10</span>
r.null <span class="re2">map</span>=tmp_<span class="re1">$city</span> <span class="re2">null</span>=<span class="nu0">3</span>
r.mapcalc <span class="st0">&quot;U_PU_F_&quot;</span><span class="re1">$city</span> = <span class="st0">&quot;if( &quot;</span>tmp_<span class="st0">&quot;<span class="es2">$city</span> == 3, &quot;</span>PUFOREST_<span class="st0">&quot;<span class="es2">$city</span> , &quot;</span>tmp_<span class="st0">&quot;<span class="es2">$city</span>)&quot;</span>  
<span class="kw2">cat</span> ~<span class="sy0">/</span>work<span class="sy0">/</span>GlobalWarming_Intech<span class="sy0">/</span>mypaper<span class="sy0">/</span>UFO<span class="sy0">/</span>palett<span class="sy0">/</span>4cl_palet <span class="sy0">|</span> r.colors <span class="re2">map</span>=<span class="st0">&quot;U_PU_F_&quot;</span><span class="re1">$city</span> <span class="re2">color</span>=rules
g.region <span class="re5">-p</span> <span class="sy0">|</span> <span class="kw2">grep</span> <span class="st0">&quot;rows&quot;</span> <span class="sy0">&gt;</span> tmp_height.txt
g.region <span class="re5">-p</span> <span class="sy0">|</span> <span class="kw2">grep</span> <span class="st0">&quot;cols&quot;</span> <span class="sy0">&gt;</span> tmp_width.txt
<span class="kw3">export</span> <span class="re2">GRASS_WIDTH</span>=<span class="sy0">`</span><span class="kw2">awk</span> <span class="st_h">' {print $2 } '</span> tmp_width.txt<span class="sy0">`</span>
<span class="kw3">export</span> <span class="re2">GRASS_HEIGHT</span>=<span class="sy0">`</span><span class="kw2">awk</span> <span class="st_h">' {print $2+130 } '</span> tmp_height.txt<span class="sy0">`</span>
<span class="co0"># export GRASS_PNGFILE=filename</span>
<span class="kw3">export</span> <span class="re2">GRASS_BACKGROUNDCOLOR</span>=000000
<span class="co0"># export GRASS_TRANSPARENT=TRUE</span>
d.mon <span class="re2">start</span>=png1  
d.rast <span class="st0">&quot;U_PU_F_&quot;</span><span class="re1">$city</span> <span class="re2">bg</span>=<span class="nu0">173</span>:<span class="nu0">216</span>:<span class="nu0">230</span>
<span class="co0"># d.vect UMZ$city fcolor=&quot;none&quot; color=black</span>
d.text <span class="re5">-b</span> <span class="re5">-p</span> <span class="re2">text</span>=<span class="re1">$city</span> <span class="re2">size</span>=<span class="nu0">7</span> <span class="re2">color</span>=white <span class="re2">bgcolor</span>=black  <span class="re2">at</span>=<span class="nu0">50</span>,<span class="nu0">40</span> 
d.barscale   <span class="re2">at</span>=<span class="nu0">30</span>,<span class="nu0">94</span> <span class="re2">bcolor</span>=black <span class="re2">tcolor</span>=white <span class="re5">--quiet</span> 
d.mon <span class="re2">stop</span>=png1
 <span class="kw2">mv</span>  map.png <span class="sy0">/</span>home<span class="sy0">/</span>ste<span class="sy0">/</span>work<span class="sy0">/</span>GlobalWarming_Intech<span class="sy0">/</span>mypaper<span class="sy0">/</span>UFO<span class="sy0">/</span>output_png_maps<span class="sy0">/</span>map_<span class="re1">$city</span>.png
<span class="kw1">done</span>
&nbsp;
&nbsp;
&nbsp;
<span class="co0"># #  Compute future trends of 4 species suitability in time</span>
g.mapset <span class="re2">mapset</span>=UFO_Fut <span class="re5">-c</span>
<span class="kw2">mkdir</span> <span class="sy0">/</span>home<span class="sy0">/</span>ste<span class="sy0">/</span>work<span class="sy0">/</span>GlobalWarming_Intech<span class="sy0">/</span>mypaper<span class="sy0">/</span>UFO<span class="sy0">/</span>output_fut_trend_table
<span class="re2">outdirT</span>=<span class="sy0">/</span>home<span class="sy0">/</span>ste<span class="sy0">/</span>work<span class="sy0">/</span>GlobalWarming_Intech<span class="sy0">/</span>mypaper<span class="sy0">/</span>UFO<span class="sy0">/</span>output_fut_trend_table<span class="sy0">/</span>
&nbsp;
<span class="re2">list</span>=<span class="sy0">`</span><span class="kw2">ls</span> <span class="sy0">/</span>home<span class="sy0">/</span>ste<span class="sy0">/</span>ost4sem<span class="sy0">/</span>grassdbwv<span class="sy0">/</span>LAEA<span class="sy0">/</span>UFO<span class="sy0">/</span>windows<span class="sy0">/`</span>
<span class="kw1">for</span> sp <span class="kw1">in</span> p_sylv q_robur q_ilex p_halep ; <span class="kw1">do</span> 
<span class="kw1">for</span> <span class="kw1">time</span> <span class="kw1">in</span> ENS_A2a_2020b ENS_A2a_2050b ENS_A2a_2080b PRESENT ; <span class="kw1">do</span>
<span class="kw1">for</span> city <span class="kw1">in</span> <span class="re1">$list</span> ; <span class="kw1">do</span>
<span class="kw3">echo</span> <span class="re1">$city</span>
<span class="kw3">echo</span> <span class="re1">$sp</span>
<span class="kw3">echo</span> <span class="re1">$time</span>
g.region <span class="re2">region</span>=<span class="re1">$city</span><span class="sy0">@</span>UFO
r.mask <span class="re5">-r</span>
r.mapcalc clc<span class="re1">$city</span>=clc<span class="sy0">@</span>UFO
r.mapcalc water = <span class="st0">&quot;if( clc<span class="es2">$city</span> == 40 ||  clc<span class="es2">$city</span> == 41 ||  clc<span class="es2">$city</span> == 42 || clc<span class="es2">$city</span> == 43 || clc<span class="es2">$city</span> == 44 || clc<span class="es2">$city</span> == 32 ||  clc<span class="es2">$city</span> == 34, 0 , 1)&quot;</span>
r.mask <span class="re5">-o</span> <span class="re2">input</span>=water <span class="re2">maskcats</span>=<span class="nu0">1</span>
r.mapcalc <span class="re1">$sp</span><span class="st0">&quot;_&quot;</span><span class="re1">$city</span><span class="st0">&quot;_&quot;</span><span class="re1">$time</span> = <span class="st0">&quot;if( <span class="es2">$time</span>&quot;</span>_<span class="st0">&quot;<span class="es2">$sp</span>@UFO == 2, 1 , 0)&quot;</span>  
r.stats <span class="re5">-gn</span> <span class="re2">input</span>=<span class="re1">$sp</span><span class="st0">&quot;_&quot;</span><span class="re1">$city</span><span class="st0">&quot;_&quot;</span><span class="re1">$time</span> <span class="re2">output</span>=<span class="re1">$sp</span><span class="st0">&quot;_&quot;</span><span class="re1">$city</span><span class="st0">&quot;_&quot;</span><span class="re1">$time</span>.txt
<span class="kw2">awk</span> <span class="re5">-v</span> <span class="re2">city</span>=<span class="re1">$city</span>  <span class="st_h">'{ sum=sum+$3} END {print city , sum ,  NR , sum/NR }'</span>  <span class="re1">$sp</span><span class="st0">&quot;_&quot;</span><span class="re1">$city</span><span class="st0">&quot;_&quot;</span><span class="re1">$time</span>.txt <span class="sy0">&gt;&gt;</span> <span class="re1">$outdirT</span><span class="st0">&quot;sum_&quot;</span><span class="re1">$sp</span><span class="st0">&quot;_&quot;</span><span class="re1">$time</span>.txt
<span class="kw1">done</span>
<span class="kw1">done</span>
<span class="kw1">done</span>
&nbsp;
&nbsp;
<span class="co0"># # extract summary table of suitability trends</span>
<span class="kw1">for</span> sp <span class="kw1">in</span> p_sylv q_robur q_ilex p_halep ; <span class="kw1">do</span> 
<span class="kw1">for</span> <span class="kw1">time</span> <span class="kw1">in</span> ENS_A2a_2020b ENS_A2a_2050b ENS_A2a_2080b PRESENT ; <span class="kw1">do</span>
<span class="co0"># Add an index </span>
<span class="kw2">awk</span> <span class="st_h">' {  print NR , $0 }'</span> sum_<span class="re1">$sp</span><span class="st0">&quot;_&quot;</span><span class="re1">$time</span>.txt <span class="sy0">&gt;</span> sumID_<span class="re1">$sp</span><span class="st0">&quot;_&quot;</span><span class="re1">$time</span>.txt 
<span class="co0"># Add an header</span>
<span class="kw2">awk</span> <span class="re5">-v</span> <span class="re2">sp</span>=<span class="re1">$sp</span> <span class="st_h">'BEGIN { print &quot;ID city&quot; , sp , &quot;tot_ha pc_sp&quot;} { print $0 }'</span> sumID_<span class="re1">$sp</span><span class="st0">&quot;_&quot;</span><span class="re1">$time</span>.txt <span class="sy0">&gt;</span> sumIDH_<span class="re1">$sp</span><span class="st0">&quot;_&quot;</span><span class="re1">$time</span>.txt
<span class="co0"># convert to csv</span>
<span class="kw2">awk</span> <span class="st_h">'{gsub(/ /,&quot;,&quot;);print}'</span> sumIDH_<span class="re1">$sp</span><span class="st0">&quot;_&quot;</span><span class="re1">$time</span>.txt <span class="sy0">&gt;</span>  ~<span class="sy0">/</span>work<span class="sy0">/</span>GlobalWarming_Intech<span class="sy0">/</span>mypaper<span class="sy0">/</span>UFO<span class="sy0">/</span>stat_<span class="re1">$sp</span><span class="st0">&quot;_&quot;</span><span class="re1">$time</span>.csv 
<span class="kw1">done</span>
<span class="kw1">done</span>
&nbsp;
&nbsp;
<span class="co0"># difference maps between current and fut scenarios</span>
g.mapset <span class="re2">mapset</span>=UFO_D <span class="re5">-c</span>
<span class="re2">list</span>=<span class="sy0">`</span><span class="kw2">ls</span> <span class="sy0">/</span>home<span class="sy0">/</span>ste<span class="sy0">/</span>ost4sem<span class="sy0">/</span>grassdbwv<span class="sy0">/</span>LAEA<span class="sy0">/</span>UFO<span class="sy0">/</span>windows<span class="sy0">/`</span>
<span class="kw1">for</span> city <span class="kw1">in</span> <span class="re1">$list</span> ; <span class="kw1">do</span>
<span class="kw1">for</span> specie <span class="kw1">in</span> p_sylv q_robur q_ilex p_halep ; <span class="kw1">do</span> 
<span class="kw2">mkdir</span> ~<span class="sy0">/</span>work<span class="sy0">/</span>GlobalWarming_Intech<span class="sy0">/</span>mypaper<span class="sy0">/</span>UFO<span class="sy0">/</span>diff_<span class="re1">$specie</span>
<span class="kw1">for</span> scenario <span class="kw1">in</span> ENS_A2a_2020b ENS_A2a_2050b ENS_A2a_2080b ; <span class="kw1">do</span>
g.region <span class="re2">region</span>=<span class="re1">$city</span><span class="sy0">@</span>UFO
r.mask <span class="re5">-r</span>
r.mapcalc clc<span class="re1">$city</span>=clc<span class="sy0">@</span>UFO
r.mapcalc water = <span class="st0">&quot;if( clc<span class="es2">$city</span> == 40 ||  clc<span class="es2">$city</span> == 41 ||  clc<span class="es2">$city</span> == 42 || clc<span class="es2">$city</span> == 43 || clc<span class="es2">$city</span> == 44 || clc<span class="es2">$city</span> == 32 ||  clc<span class="es2">$city</span> == 34, 0 , 1)&quot;</span>
r.mask <span class="re5">-o</span> <span class="re2">input</span>=water <span class="re2">maskcats</span>=<span class="nu0">1</span>
r.mapcalc Amap = <span class="st0">&quot;if( <span class="es2">$specie</span>&quot;</span>_<span class="st0">&quot;<span class="es2">$city</span>&quot;</span>_PRESENT<span class="st0">&quot;@UFO_Fut == 1, 2 , 1)&quot;</span>
r.mapcalc Bmap = <span class="st0">&quot;if( <span class="es2">$specie</span>&quot;</span>_<span class="st0">&quot;<span class="es2">$city</span>&quot;</span>_<span class="st0">&quot;<span class="es2">$scenario</span>@UFO_Fut == 1, 2 , 1)&quot;</span>
r.mapcalculator <span class="re2">amap</span>=Amap <span class="re2">bmap</span>=Bmap <span class="re2">formula</span>=Amap<span class="sy0">*</span><span class="nu0">10</span>+Bmap <span class="re2">outfile</span>=D_<span class="re1">$scenario</span><span class="st0">&quot;_&quot;</span><span class="re1">$specie</span><span class="st0">&quot;_&quot;</span><span class="re1">$city</span> <span class="re5">--overwrite</span>
r.stats <span class="re5">-c</span> D_<span class="re1">$scenario</span><span class="st0">&quot;_&quot;</span><span class="re1">$specie</span><span class="st0">&quot;_&quot;</span><span class="re1">$city</span> <span class="sy0">&gt;</span> ~<span class="sy0">/</span>work<span class="sy0">/</span>GlobalWarming_Intech<span class="sy0">/</span>mypaper<span class="sy0">/</span>UFO<span class="sy0">/</span>diff_<span class="re1">$specie</span><span class="sy0">/</span>D_<span class="re1">$scenario</span><span class="st0">&quot;_&quot;</span><span class="re1">$specie</span><span class="st0">&quot;_&quot;</span><span class="re1">$city</span>
<span class="kw1">done</span>
<span class="kw1">done</span>
<span class="kw1">done</span>
&nbsp;
&nbsp;
<span class="co0"># [1] class 11 : No suitable</span>
<span class="co0"># [2] class 12 : Gain of suitability</span>
<span class="co0"># [3] class 21 : Loss of suitability</span>
<span class="co0"># [4] class 22 : Stable suitability</span>
<span class="co0"># [5] *        : No data</span>
&nbsp;
&nbsp;
&nbsp;
<span class="co0">## PLOT difference  maps current / future with urban and periurban greening</span>
<span class="kw3">echo</span> <span class="nu0">11</span> <span class="nu0">127</span>:<span class="nu0">127</span>:<span class="nu0">127</span> <span class="sy0">&gt;</span> ~<span class="sy0">/</span>work<span class="sy0">/</span>GlobalWarming_Intech<span class="sy0">/</span>mypaper<span class="sy0">/</span>UFO<span class="sy0">/</span>palett<span class="sy0">/</span>4cl_D_palet
<span class="kw3">echo</span> <span class="nu0">12</span> <span class="nu0">0</span>:<span class="nu0">255</span>:<span class="nu0">0</span> <span class="sy0">&gt;&gt;</span> ~<span class="sy0">/</span>work<span class="sy0">/</span>GlobalWarming_Intech<span class="sy0">/</span>mypaper<span class="sy0">/</span>UFO<span class="sy0">/</span>palett<span class="sy0">/</span>4cl_D_palet
<span class="kw3">echo</span> <span class="nu0">21</span> <span class="nu0">255</span>:<span class="nu0">0</span>:<span class="nu0">0</span> <span class="sy0">&gt;&gt;</span> ~<span class="sy0">/</span>work<span class="sy0">/</span>GlobalWarming_Intech<span class="sy0">/</span>mypaper<span class="sy0">/</span>UFO<span class="sy0">/</span>palett<span class="sy0">/</span>4cl_D_palet
<span class="kw3">echo</span> <span class="nu0">22</span> <span class="nu0">0</span>:<span class="nu0">0</span>:<span class="nu0">255</span> <span class="sy0">&gt;&gt;</span> ~<span class="sy0">/</span>work<span class="sy0">/</span>GlobalWarming_Intech<span class="sy0">/</span>mypaper<span class="sy0">/</span>UFO<span class="sy0">/</span>palett<span class="sy0">/</span>4cl_D_palet
<span class="kw2">mkdir</span> <span class="sy0">/</span>home<span class="sy0">/</span>ste<span class="sy0">/</span>work<span class="sy0">/</span>GlobalWarming_Intech<span class="sy0">/</span>mypaper<span class="sy0">/</span>UFO<span class="sy0">/</span>output_Dmaps
r.mask <span class="re5">-r</span>
&nbsp;
<span class="re2">list</span>=<span class="sy0">`</span><span class="kw2">ls</span> <span class="sy0">/</span>home<span class="sy0">/</span>ste<span class="sy0">/</span>ost4sem<span class="sy0">/</span>grassdbwv<span class="sy0">/</span>LAEA<span class="sy0">/</span>UFO<span class="sy0">/</span>windows<span class="sy0">/`</span>
<span class="kw1">for</span> city <span class="kw1">in</span> <span class="re1">$list</span> ; <span class="kw1">do</span>
<span class="kw1">for</span> sp <span class="kw1">in</span> p_sylv q_robur q_ilex p_halep ; <span class="kw1">do</span> 
<span class="kw1">for</span> scenario <span class="kw1">in</span>  <span class="nu0">2020</span> <span class="nu0">2050</span> <span class="nu0">2080</span> ; <span class="kw1">do</span>
<span class="co0"># ENS_A2a_2020b ENS_A2a_2050b ENS_A2a_2080b </span>
g.region <span class="re2">region</span>=<span class="re1">$city</span><span class="sy0">@</span>UFO
<span class="kw2">cat</span> ~<span class="sy0">/</span>work<span class="sy0">/</span>GlobalWarming_Intech<span class="sy0">/</span>mypaper<span class="sy0">/</span>UFO<span class="sy0">/</span>palett<span class="sy0">/</span>4cl_D_palet <span class="sy0">|</span> r.colors <span class="re2">map</span>=D_ENS_A2a_<span class="re1">$scenario</span><span class="st0">&quot;b_&quot;</span><span class="re1">$sp</span><span class="st0">&quot;_&quot;</span><span class="re1">$city</span><span class="sy0">@</span>UFO_D <span class="re2">color</span>=rules
g.region <span class="re5">-p</span> <span class="sy0">|</span> <span class="kw2">grep</span> <span class="st0">&quot;rows&quot;</span> <span class="sy0">&gt;</span> tmp_height.txt
g.region <span class="re5">-p</span> <span class="sy0">|</span> <span class="kw2">grep</span> <span class="st0">&quot;cols&quot;</span> <span class="sy0">&gt;</span> tmp_width.txt
<span class="kw3">export</span> <span class="re2">GRASS_WIDTH</span>=<span class="sy0">`</span><span class="kw2">awk</span> <span class="st_h">' {print $2 } '</span> tmp_width.txt<span class="sy0">`</span>
<span class="kw3">export</span> <span class="re2">GRASS_HEIGHT</span>=<span class="sy0">`</span><span class="kw2">awk</span> <span class="st_h">' {print $2+130 } '</span> tmp_height.txt<span class="sy0">`</span>
<span class="kw3">export</span> <span class="re2">GRASS_BACKGROUNDCOLOR</span>=000000
d.mon <span class="re2">start</span>=png1  
d.rast D_ENS_A2a_<span class="re1">$scenario</span><span class="st0">&quot;b_&quot;</span><span class="re1">$sp</span><span class="st0">&quot;_&quot;</span><span class="re1">$city</span><span class="sy0">@</span>UFO_D <span class="re2">bg</span>=<span class="nu0">173</span>:<span class="nu0">216</span>:<span class="nu0">230</span>
d.vect UMZ<span class="re1">$city</span><span class="sy0">@</span>UFO <span class="re2">fcolor</span>=<span class="st0">&quot;none&quot;</span> <span class="re2">color</span>=black
d.text <span class="re5">-b</span> <span class="re5">-p</span> <span class="re2">text</span>=<span class="re1">$city</span><span class="st0">&quot; 2000 - &quot;</span><span class="re1">$scenario</span> <span class="re2">size</span>=<span class="nu0">6</span> <span class="re2">color</span>=white <span class="re2">bgcolor</span>=black  <span class="re2">at</span>=<span class="nu0">10</span>,<span class="nu0">40</span> 
d.barscale   <span class="re2">at</span>=<span class="nu0">30</span>,<span class="nu0">94</span> <span class="re2">bcolor</span>=black <span class="re2">tcolor</span>=white <span class="re5">--quiet</span> 
d.mon <span class="re2">stop</span>=png1
 <span class="kw2">mv</span>  map.png <span class="sy0">/</span>home<span class="sy0">/</span>ste<span class="sy0">/</span>work<span class="sy0">/</span>GlobalWarming_Intech<span class="sy0">/</span>mypaper<span class="sy0">/</span>UFO<span class="sy0">/</span>output_Dmaps<span class="sy0">/</span>Dmap_<span class="re1">$city</span><span class="st0">&quot;_&quot;</span><span class="re1">$sp</span><span class="st0">&quot;_&quot;</span><span class="re1">$scenario</span>.png
<span class="kw1">done</span>
<span class="kw1">done</span>
<span class="kw1">done</span>
&nbsp;
&nbsp;
&nbsp;
&nbsp;
&nbsp;
<span class="co0"># # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # </span>
<span class="co0"># # Create a legend for Urban Peri urban greening distribution</span>
<span class="co0"># # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # </span>
r.mask <span class="re5">-r</span>
<span class="re2">city</span>=bruxelles
g.region <span class="re2">region</span>=<span class="re1">$city</span>
<span class="kw2">cat</span> ~<span class="sy0">/</span>work<span class="sy0">/</span>GlobalWarming_Intech<span class="sy0">/</span>mypaper<span class="sy0">/</span>UFO<span class="sy0">/</span>palett<span class="sy0">/</span>4cl_palet <span class="sy0">|</span> r.colors <span class="re2">map</span>=<span class="st0">&quot;U_PU_F_&quot;</span><span class="re1">$city</span> <span class="re2">color</span>=rules
<span class="kw3">export</span> <span class="re2">GRASS_HEIGHT</span>=<span class="nu0">400</span>
<span class="kw3">export</span> <span class="re2">GRASS_WIDTH</span>=<span class="nu0">550</span>
<span class="kw3">export</span> <span class="re2">GRASS_BACKGROUNDCOLOR</span>=FFFFFF
<span class="co0"># export GRASS_TRANSPARENT=TRUE</span>
d.mon <span class="re2">start</span>=png1  
d.legend  <span class="re5">-c</span> <span class="re2">map</span>=U_PU_F_bruxelles <span class="re2">use</span>=<span class="nu0">0</span>,<span class="nu0">1</span>,<span class="nu0">10</span>,<span class="nu0">11</span>
d.text <span class="re5">-b</span> <span class="re5">-p</span> <span class="re2">text</span>=<span class="st0">&quot;Peri urban&quot;</span> <span class="re2">size</span>=<span class="nu0">9</span> <span class="re2">color</span>=black <span class="re2">at</span>=<span class="nu0">90</span>,<span class="nu0">120</span>
d.text <span class="re5">-b</span> <span class="re5">-p</span> <span class="re2">text</span>=<span class="st0">&quot;Peri urban greening&quot;</span> <span class="re2">size</span>=<span class="nu0">9</span> <span class="re2">color</span>=black <span class="re2">at</span>=<span class="nu0">90</span>,<span class="nu0">180</span>
d.text <span class="re5">-b</span> <span class="re5">-p</span> <span class="re2">text</span>=<span class="st0">&quot;Urban&quot;</span> <span class="re2">size</span>=<span class="nu0">9</span> <span class="re2">color</span>=black <span class="re2">at</span>=<span class="nu0">90</span>,<span class="nu0">240</span>
d.text <span class="re5">-b</span> <span class="re5">-p</span> <span class="re2">text</span>=<span class="st0">&quot;Urban greening&quot;</span> <span class="re2">size</span>=<span class="nu0">9</span> <span class="re2">color</span>=black <span class="re2">at</span>=<span class="nu0">90</span>,<span class="nu0">300</span>
d.mon <span class="re2">stop</span>=png1
 <span class="kw2">mv</span>  map.png <span class="sy0">/</span>home<span class="sy0">/</span>ste<span class="sy0">/</span>work<span class="sy0">/</span>GlobalWarming_Intech<span class="sy0">/</span>mypaper<span class="sy0">/</span>UFO<span class="sy0">/</span>output_png_maps<span class="sy0">/</span>legend.png
&nbsp;
<span class="co0"># Black background</span>
r.mask <span class="re5">-r</span>
<span class="re2">city</span>=bruxelles
g.region <span class="re2">region</span>=<span class="re1">$city</span>
<span class="kw2">cat</span> ~<span class="sy0">/</span>work<span class="sy0">/</span>GlobalWarming_Intech<span class="sy0">/</span>mypaper<span class="sy0">/</span>UFO<span class="sy0">/</span>palett<span class="sy0">/</span>4cl_palet <span class="sy0">|</span> r.colors <span class="re2">map</span>=<span class="st0">&quot;U_PU_F_&quot;</span><span class="re1">$city</span> <span class="re2">color</span>=rules
<span class="kw3">export</span> <span class="re2">GRASS_HEIGHT</span>=<span class="nu0">400</span>
<span class="kw3">export</span> <span class="re2">GRASS_WIDTH</span>=<span class="nu0">550</span>
<span class="kw3">export</span> <span class="re2">GRASS_BACKGROUNDCOLOR</span>=000000
<span class="co0"># export GRASS_TRANSPARENT=TRUE</span>
d.mon <span class="re2">start</span>=png1  
d.legend  <span class="re5">-c</span> <span class="re2">map</span>=U_PU_F_bruxelles <span class="re2">use</span>=<span class="nu0">0</span>,<span class="nu0">1</span>,<span class="nu0">10</span>,<span class="nu0">11</span>
d.text <span class="re5">-b</span> <span class="re5">-p</span> <span class="re2">text</span>=<span class="st0">&quot;Peri urban&quot;</span> <span class="re2">size</span>=<span class="nu0">9</span> <span class="re2">color</span>=white <span class="re2">at</span>=<span class="nu0">90</span>,<span class="nu0">120</span>
d.text <span class="re5">-b</span> <span class="re5">-p</span> <span class="re2">text</span>=<span class="st0">&quot;Peri urban greening&quot;</span> <span class="re2">size</span>=<span class="nu0">9</span> <span class="re2">color</span>=white <span class="re2">at</span>=<span class="nu0">90</span>,<span class="nu0">180</span>
d.text <span class="re5">-b</span> <span class="re5">-p</span> <span class="re2">text</span>=<span class="st0">&quot;Urban&quot;</span> <span class="re2">size</span>=<span class="nu0">9</span> <span class="re2">color</span>=white <span class="re2">at</span>=<span class="nu0">90</span>,<span class="nu0">240</span>
d.text <span class="re5">-b</span> <span class="re5">-p</span> <span class="re2">text</span>=<span class="st0">&quot;Urban greening&quot;</span> <span class="re2">size</span>=<span class="nu0">9</span> <span class="re2">color</span>=white <span class="re2">at</span>=<span class="nu0">90</span>,<span class="nu0">300</span>
d.mon <span class="re2">stop</span>=png1
 <span class="kw2">mv</span>  map.png <span class="sy0">/</span>home<span class="sy0">/</span>ste<span class="sy0">/</span>work<span class="sy0">/</span>GlobalWarming_Intech<span class="sy0">/</span>mypaper<span class="sy0">/</span>UFO<span class="sy0">/</span>output_png_maps<span class="sy0">/</span>legend_black.png
&nbsp;
&nbsp;
<span class="co0"># # # # # # # # # # # # # # # # # # # # # </span>
<span class="co0"># # Create a legend for Difference maps</span>
<span class="co0"># # # # # # # # # # # # # # # # # # # # # </span>
<span class="co0"># Holm oak legend</span>
<span class="kw3">export</span> <span class="re2">GRASS_HEIGHT</span>=<span class="nu0">400</span>
<span class="kw3">export</span> <span class="re2">GRASS_WIDTH</span>=<span class="nu0">550</span>
<span class="kw3">export</span> <span class="re2">GRASS_BACKGROUNDCOLOR</span>=FFFFFF
d.mon <span class="re2">start</span>=png1  
d.legend  <span class="re5">-c</span> <span class="re2">map</span>=D_ENS_A2a_2020b_q_ilex_paris<span class="sy0">@</span>UFO_D <span class="re2">use</span>=<span class="nu0">11</span>,<span class="nu0">12</span>,<span class="nu0">21</span>,<span class="nu0">22</span>
d.text <span class="re5">-b</span> <span class="re5">-p</span> <span class="re2">text</span>=<span class="st0">&quot;Holm Oak suitability&quot;</span> <span class="re2">size</span>=<span class="nu0">10</span> <span class="re2">color</span>=black <span class="re2">at</span>=<span class="nu0">20</span>,<span class="nu0">60</span>
d.text <span class="re5">-b</span> <span class="re5">-p</span> <span class="re2">text</span>=<span class="st0">&quot;Never suitable&quot;</span> <span class="re2">size</span>=<span class="nu0">9</span> <span class="re2">color</span>=black <span class="re2">at</span>=<span class="nu0">90</span>,<span class="nu0">120</span>
d.text <span class="re5">-b</span> <span class="re5">-p</span> <span class="re2">text</span>=<span class="st0">&quot;Gain of suitability&quot;</span> <span class="re2">size</span>=<span class="nu0">9</span> <span class="re2">color</span>=black <span class="re2">at</span>=<span class="nu0">90</span>,<span class="nu0">180</span>
d.text <span class="re5">-b</span> <span class="re5">-p</span> <span class="re2">text</span>=<span class="st0">&quot;Vulnerable&quot;</span> <span class="re2">size</span>=<span class="nu0">9</span> <span class="re2">color</span>=black <span class="re2">at</span>=<span class="nu0">90</span>,<span class="nu0">240</span>
d.text <span class="re5">-b</span> <span class="re5">-p</span> <span class="re2">text</span>=<span class="st0">&quot;Stable suitability&quot;</span> <span class="re2">size</span>=<span class="nu0">9</span> <span class="re2">color</span>=black <span class="re2">at</span>=<span class="nu0">90</span>,<span class="nu0">300</span>
d.mon <span class="re2">stop</span>=png1
 <span class="kw2">mv</span>  map.png <span class="sy0">/</span>home<span class="sy0">/</span>ste<span class="sy0">/</span>work<span class="sy0">/</span>GlobalWarming_Intech<span class="sy0">/</span>mypaper<span class="sy0">/</span>UFO<span class="sy0">/</span>output_png_maps<span class="sy0">/</span>legend_Holm_oak_Diff.png
d.rast D_ENS_A2a_<span class="re1">$scenario</span><span class="st0">&quot;b_&quot;</span><span class="re1">$sp</span><span class="st0">&quot;_&quot;</span><span class="re1">$city</span><span class="sy0">@</span>UFO_D <span class="re2">bg</span>=<span class="nu0">173</span>:<span class="nu0">216</span>:<span class="nu0">230</span>
&nbsp;
<span class="kw3">export</span> <span class="re2">GRASS_HEIGHT</span>=<span class="nu0">400</span>
<span class="kw3">export</span> <span class="re2">GRASS_WIDTH</span>=<span class="nu0">650</span>
<span class="kw3">export</span> <span class="re2">GRASS_BACKGROUNDCOLOR</span>=FFFFFF
d.mon <span class="re2">start</span>=png1  
d.legend  <span class="re5">-c</span> <span class="re2">map</span>=D_ENS_A2a_2020b_q_ilex_paris<span class="sy0">@</span>UFO_D <span class="re2">use</span>=<span class="nu0">11</span>,<span class="nu0">12</span>,<span class="nu0">21</span>,<span class="nu0">22</span>
d.text <span class="re5">-b</span> <span class="re5">-p</span> <span class="re2">text</span>=<span class="st0">&quot;Scots Pine suitability&quot;</span> <span class="re2">size</span>=<span class="nu0">10</span> <span class="re2">color</span>=black <span class="re2">at</span>=<span class="nu0">20</span>,<span class="nu0">60</span>
d.text <span class="re5">-b</span> <span class="re5">-p</span> <span class="re2">text</span>=<span class="st0">&quot;Never suitable&quot;</span> <span class="re2">size</span>=<span class="nu0">9</span> <span class="re2">color</span>=black <span class="re2">at</span>=<span class="nu0">90</span>,<span class="nu0">120</span>
d.text <span class="re5">-b</span> <span class="re5">-p</span> <span class="re2">text</span>=<span class="st0">&quot;Gain of suitability&quot;</span> <span class="re2">size</span>=<span class="nu0">9</span> <span class="re2">color</span>=black <span class="re2">at</span>=<span class="nu0">90</span>,<span class="nu0">180</span>
d.text <span class="re5">-b</span> <span class="re5">-p</span> <span class="re2">text</span>=<span class="st0">&quot;Vulnerable&quot;</span> <span class="re2">size</span>=<span class="nu0">9</span> <span class="re2">color</span>=black <span class="re2">at</span>=<span class="nu0">90</span>,<span class="nu0">240</span>
d.text <span class="re5">-b</span> <span class="re5">-p</span> <span class="re2">text</span>=<span class="st0">&quot;Stable suitability&quot;</span> <span class="re2">size</span>=<span class="nu0">9</span> <span class="re2">color</span>=black <span class="re2">at</span>=<span class="nu0">90</span>,<span class="nu0">300</span>
d.mon <span class="re2">stop</span>=png1
 <span class="kw2">mv</span>  map.png <span class="sy0">/</span>home<span class="sy0">/</span>ste<span class="sy0">/</span>work<span class="sy0">/</span>GlobalWarming_Intech<span class="sy0">/</span>mypaper<span class="sy0">/</span>UFO<span class="sy0">/</span>output_png_maps<span class="sy0">/</span>legend_Scotts_pine_Diff.png
&nbsp;
<span class="co0">## DONE</span></pre>

<p>
<strong>Below the related R script</strong>
</p>
<pre class="code R">UF = read.table(file=&quot;~/work/GlobalWarming_Intech/mypaper/UFO/UFstat.csv&quot;, header=TRUE, sep=&quot;,&quot;)
PUF = read.table(file=&quot;~/work/GlobalWarming_Intech/mypaper/UFO/PUFstat.csv&quot;, header=TRUE, sep=&quot;,&quot;)
UPUF = PUF
UPUF$UF = UF$UF
UPUF$U_tot = UF$U_tot
UPUF$pc_UF = UF$pc_UF
UPUF$tot_Area = UPUF$U_tot+UPUF$PU_tot+UPUF$PUF+UPUF$PU_tot
UPUF$tot_FArea = UPUF$PUF+UPUF$UF
UPUF$tot_pc_green = UPUF$tot_Area/UPUF$tot_FArea
&nbsp;
col=rainbow(15)
# col =terrain.colors(15, alpha = 1)
# col=topo.colors(n, alpha = 1)
#  col=heat.colors(15, alpha = 1)
png(&quot;~/work/GlobalWarming_Intech/mypaper/UFO/UPUF_stat.png&quot;, width = 800, height = 800)
par(mar=c(5,5,1,1))
plot(UPUF$pc_UF,UPUF$pc_PUF,  axes=FALSE, xlab=&quot;% Forest in Urban Areas&quot; , ylab=&quot;% Forest in Peri Urban Areas&quot;, cex.lab=2)
&nbsp;
axis(side = 1, at=c(0,.1,.2,.3,.4,.5,.6,.7) , labels=c(0,10,20,30,40,50,60,70), cex.axis=2)
axis(side = 2, at = c(0,.1,.2,.3,.4,.5,.6,.7,.8) , labels = c(0,10,20,30,40,50,60,70,80),cex.axis=2)
# ,xlabel=c(0,10,20,30,40,50), ylabel=c(0,10,20,30,40,50,60,70) )
&nbsp;
symbols(UPUF$pc_UF,UPUF$pc_PUF,circles=UPUF$tot_Area/30000000, inches=FALSE,  bg = col , fg=col, add=TRUE)
text(UPUF$pc_U, UPUF$pc_PUF, labels =UPUF$city, cex=1.7)
box()
dev.off()
&nbsp;
# # # 
&nbsp;
UF = read.table(file=&quot;~/work/GlobalWarming_Intech/mypaper/UFO/UFstat.csv&quot;, header=TRUE, sep=&quot;,&quot;)
PUF = read.table(file=&quot;~/work/GlobalWarming_Intech/mypaper/UFO/PUFstat.csv&quot;, header=TRUE, sep=&quot;,&quot;)
&nbsp;
syntM= matrix(NA,15,6)
rownames(syntM)=UPUF$city
colnames(syntM)=c(&quot;Total ha&quot;,&quot;Urban ha&quot;,&quot;Periurban ha&quot;,&quot;% G&quot;,&quot;% UG&quot;,&quot;% UPUG&quot;)
syntM[,1]=UPUF$tot_Area
syntM[,2]=UPUF$U_tot
syntM[,3]=UPUF$PU_tot
syntM[,4]=UPUF$tot_pc_green
syntM[,5]=UPUF$pc_UF*100
syntM[,6]=UPUF$pc_PUF*100
&nbsp;
library(xtable)
# export.kval = xtable(kval, align=c(&quot;l&quot;,&quot;l&quot;,&quot;l&quot;,&quot;l&quot;,&quot;l&quot;))
# digits(export.kval)[c(1,2,3,4,5)]=c(0,0,0,3,3)
# print(export.kval, type=&quot;latex&quot;, file=paste(&quot;/space/casalst/REPORT/tablesReport/TEX_R_table/R_kappa_table/R_kappa_sp_&quot;,i,&quot;.tex&quot;,sep=&quot;&quot;), append=FALSE, floating=FALSE, table.placement = &quot;ht&quot;, caption.placement=&quot;bottom&quot;,  latex.environments=c(&quot;center&quot;))
&nbsp;
export.syntM = xtable(syntM, align=c(&quot;l&quot;,&quot;l&quot;,&quot;l&quot;,&quot;l&quot;,&quot;l&quot;,&quot;l&quot;,&quot;l&quot;))
digits(export.syntM)[c(1,2,3,4,5,6,7)]=c(0,0,0,0,3,3,3)
print(export.syntM, type=&quot;latex&quot;, file=&quot;/home/ste/work/GlobalWarming_Intech/mypaper/UFO/output_table_R/table1.tex&quot;, append=FALSE, floating=FALSE, table.placement = &quot;ht&quot;, caption.placement=&quot;bottom&quot;,  latex.environments=c(&quot;center&quot;))</pre>
<div class="plugin_note notetip">g.region can be set to 500 for a generalization of statistics in future applications
</div>
</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Urban and Peri-Urban Tree Cover in European Cities: Current Distribution and Future Vulnerability Under Climate Change Scenarios.&quot;,&quot;hid&quot;:&quot;urban_and_peri-urban_tree_cover_in_european_citiescurrent_distribution_and_future_vulnerability_under_climate_change_scenarios&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:1,&quot;range&quot;:&quot;2-&quot;} -->