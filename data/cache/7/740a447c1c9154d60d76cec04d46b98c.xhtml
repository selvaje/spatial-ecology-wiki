
<h1 class="sectionedit1" id="exercise_2aextract_landsat_profiles_from_vector">Exercise 2a: Extract Landsat profiles from vector</h1>
<div class="level1">

<p>
In this exercise, the following tools will be used:
</p>
<ul>
<li class="level1"><div class="li"> pktools: pkextract and pkogrstat</div>
</li>
<li class="level1"><div class="li"> awk (basic)</div>
</li>
</ul>

<p>
Create a directory for this exercise:
</p>
<pre class="code bash"><span class="kw2">mkdir</span> <span class="re5">-p</span> <span class="co1">${OUTPUTDIR}</span><span class="sy0">/</span>exercise2</pre>

<p>
<em class="u">Extract Landsat profiles from forest in Cornwall (mean value for each polygon)</em>
</p>
<pre class="code bash">pkextract <span class="re5">-i</span> <span class="co1">${LANDSATDIR}</span><span class="sy0">/</span><span class="co1">${LANDSATIMG}</span> <span class="re5">-s</span> <span class="co1">${OUTPUTDIR}</span><span class="sy0">/</span>exercise1<span class="sy0">/</span>cornwall_forest_3035.shp <span class="re5">-o</span> <span class="co1">${OUTPUTDIR}</span><span class="sy0">/</span>exercise2<span class="sy0">/</span>forest_landsat.shp <span class="re5">-r</span> mean <span class="re5">-polygon</span></pre>

<p>
<br/>

<em class="u">Calculate statistics using pkstatogr</em>
</p>
<pre class="code bash">pkstatogr <span class="re5">-i</span> <span class="co1">${OUTPUTDIR}</span><span class="sy0">/</span>exercise2<span class="sy0">/</span>forest_landsat.shp <span class="re5">-n</span> B0 <span class="re5">-n</span> B1 <span class="re5">-n</span> B2 <span class="re5">-n</span> B3 <span class="re5">-n</span> B4 <span class="re5">-n</span> B5 <span class="re5">-n</span> B6 <span class="re5">-n</span> B7 <span class="re5">-mean</span> <span class="re5">-stdev</span><span class="sy0">|</span> <span class="kw2">awk</span> <span class="st_h">'{print $4,$6}'</span> <span class="sy0">&gt;</span> <span class="co1">${OUTPUTDIR}</span><span class="sy0">/</span>exercise2<span class="sy0">/</span>forest_landsat_mean_stdev.txt</pre>

<p>
<br/>

<em class="u">Extract Landsat profiles from water in Cornwall (mean value for each polygon)</em>
</p>
<pre class="code bash">pkextract <span class="re5">-i</span> <span class="co1">${LANDSATDIR}</span><span class="sy0">/</span><span class="co1">${LANDSATIMG}</span> <span class="re5">-s</span> <span class="co1">${OUTPUTDIR}</span><span class="sy0">/</span>exercise1<span class="sy0">/</span>cornwall_water_3035.shp <span class="re5">-o</span> <span class="co1">${OUTPUTDIR}</span><span class="sy0">/</span>exercise2<span class="sy0">/</span>water_landsat.shp <span class="re5">-r</span> mean <span class="re5">-polygon</span></pre>

<p>
<br/>

<em class="u">Calculate statistics using pkstatogr</em>
</p>
<pre class="code bash">pkstatogr <span class="re5">-i</span> <span class="co1">${OUTPUTDIR}</span><span class="sy0">/</span>exercise2<span class="sy0">/</span>water_landsat.shp <span class="re5">-n</span> B0 <span class="re5">-n</span> B1 <span class="re5">-n</span> B2 <span class="re5">-n</span> B3 <span class="re5">-n</span> B4 <span class="re5">-n</span> B5 <span class="re5">-n</span> B6 <span class="re5">-n</span> B7 <span class="re5">-mean</span> <span class="re5">-stdev</span><span class="sy0">|</span> <span class="kw2">awk</span> <span class="st_h">'{print $4,$6}'</span> <span class="sy0">&gt;</span> <span class="co1">${OUTPUTDIR}</span><span class="sy0">/</span>exercise2<span class="sy0">/</span>water_landsat_mean_stdev.txt</pre>

<p>
<br/>

<em class="u">Plot the profiles in gnuplot</em> (click <a href="/dokuwiki/doku.php?id=wiki:gnuplot2a" class="wikilink1" title="wiki:gnuplot2a"> here</a> for the code)
</p>

<p>
Question: Why is is this signature different than a typical vegetation reflectance spectrum?
</p>
<div class="notewarning">Standard Landsat images are not atmospherically corrected
</div>
<p>
Consult <a href="http://www.ncaveo.ac.uk/special_topics/atmospheric_correction/example2/" class="urlextern" target="blanc" title="http://www.ncaveo.ac.uk/special_topics/atmospheric_correction/example2/" rel="nofollow noopener">http://www.ncaveo.ac.uk/special_topics/atmospheric_correction/example2/</a>
</p>

</div>
