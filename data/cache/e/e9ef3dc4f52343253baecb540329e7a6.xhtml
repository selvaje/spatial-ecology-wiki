
<h1 class="sectionedit1" id="basic_bash_scripts">Basic bash scripts</h1>
<div class="level1">

<p>
Getitor installation 
</p>

<p>
sudo apt-get install gedit  gedit-plugins
</p>

<p>
Exercise:<br/>

Script: open by gedit <a href="http://www.spatial-ecology.net/ost4sem/exercise/basic_adv_bash/basic_bash.sh" class="urlextern" target="blanc" title="http://www.spatial-ecology.net/ost4sem/exercise/basic_adv_bash/basic_bash.sh" rel="nofollow noopener"> ~/ost4sem/exercise/basic_adv_bash/basic_bash.sh </a><br/>

Data: <a href="http://www.spatial-ecology.net/ost4sem/exercise/basic_adv_bash/aver_month_nuts3_fire.asc" class="urlextern" target="blanc" title="http://www.spatial-ecology.net/ost4sem/exercise/basic_adv_bash/aver_month_nuts3_fire.asc" rel="nofollow noopener"> ~/ost4sem/exercise/basic_adv_bash/aver_month_nuts3_fire.asc </a><br/>

Directory: ~/ost4sem/exercise/basic_adv_bash
</p>

</div>
<!-- EDIT1 SECTION "Basic bash scripts" [1-480] -->
<h2 class="sectionedit2" id="search_a_command">Search a command</h2>
<div class="level2">

<p>
Change directory and create a little file from a large file:
</p>
<pre class="code bash">gedit ~<span class="sy0">/</span>ost4sem<span class="sy0">/</span>exercise<span class="sy0">/</span>basic_adv_bash<span class="sy0">/</span>basic_bash.sh <span class="sy0">&amp;</span>
<span class="kw3">cd</span> ~<span class="sy0">/</span>ost4sem<span class="sy0">/</span>exercise<span class="sy0">/</span>basic_adv_bash<span class="sy0">/</span>
<span class="kw2">head</span> <span class="re5">-1000</span> aver_month_nuts3_fire.asc <span class="sy0">&gt;</span> input.txt </pre>

<p>
Read/explore the input.txt file<br/>

</p>

<p>
Run the following commands one by one.
</p>
<pre class="code bash"><span class="kw2">head</span> input.txt
<span class="kw2">more</span> input.txt
<span class="kw2">tail</span> input.txt </pre>

<p>
Count the line/word/character in a input.txt
</p>
<pre class="code bash"><span class="kw2">wc</span> input.txt</pre>

<p>
Search for a word in a file 
</p>
<pre class="code bash"><span class="kw2">grep</span> <span class="st0">&quot;2007&quot;</span> input.txt</pre>

<p>
I want to search for a command able to sort the input.txt table based on the <em>Year</em> column (YYYY).
</p>
<pre class="code bash"><span class="kw2">man</span> <span class="re5">-k</span>  <span class="kw2">sort</span></pre>

<p>
The last lines contain:<br/>

<em>sort (1)  - sort lines of text files</em><br/>

So i will search how to use the sort command:
</p>
<pre class="code bash"><span class="kw2">man</span> <span class="kw2">sort</span></pre>

</div>
<!-- EDIT2 SECTION "Search a command" [481-1305] -->
<h2 class="sectionedit3" id="sorting_a_file">Sorting a file</h2>
<div class="level2">

<p>
The <em>-k</em> option identify the column of sorting:<br/>

</p>
<ul>
<li class="level1"><div class="li"> Sorting based on column number 2  ( -k 2,2)</div>
</li>
<li class="level1"><div class="li"> sorting based on column number 2 and then number 1 ( -k 2,1)</div>
</li>
</ul>

<p>
See again man sort for more options like -n -g<br/>

Alfa numeric sorting:<br/>

</p>
<pre class="code"> sort -k 2,2 input.txt</pre>

<p>
general numerical sorting<br/>

</p>
<pre class="code"> sort -k 2,2 -g  input.txt</pre>

<p>
string numerical sorting<br/>

</p>
<pre class="code"> sort -k 2,2 -n  input.txt</pre>

<p>
Save the result of a command in a file by &#039;&gt;&#039; symbol
</p>
<pre class="code bash"><span class="kw2">sort</span> <span class="re5">-k</span> <span class="nu0">2</span>,<span class="nu0">2</span> <span class="re5">-g</span> input.txt <span class="sy0">&gt;</span> input_s.txt
<span class="kw2">wc</span> <span class="re5">-l</span> input_s.txt</pre>

<p>
Which is the first and last year of observations?
</p>

</div>
<!-- EDIT3 SECTION "Sorting a file" [1306-1890] -->
<h2 class="sectionedit4" id="append_the_command_result_to_a_file">Append the command result to a file</h2>
<div class="level2">

<p>
Add the result of a command in the already existing “output” file by &#039;»&#039; symbol
</p>
<pre class="code bash"><span class="kw2">sort</span> <span class="re5">-k</span> <span class="nu0">3</span>,<span class="nu0">3</span> <span class="re5">-g</span> input.txt <span class="sy0">&gt;&gt;</span> input_s.txt
<span class="kw2">wc</span> <span class="re5">-l</span> input_s.txt</pre>

</div>
<!-- EDIT4 SECTION "Append the command result to a file" [1891-2097] -->
<h2 class="sectionedit5" id="concatenate_commands">Concatenate commands</h2>
<div class="level2">

<p>
We want to count how many observations exist in year 2007 in the input.txt.<br/>

Concatenate command by the “|” symbol
Search for the  word “2007” and count the line/word/character
</p>
<pre class="code bash"><span class="kw2">grep</span> <span class="st0">&quot;2007&quot;</span> input.txt <span class="sy0">|</span> <span class="kw2">wc</span></pre>

</div>
<!-- EDIT5 SECTION "Concatenate commands" [2098-2355] -->
<h2 class="sectionedit6" id="use_the_variable">Use the variable</h2>
<div class="level2">

<p>
Define the value of the variable, print it by putting it in front of the $ symbol
</p>
<pre class="code bash"><span class="re2">var</span>=<span class="nu0">21</span> ; <span class="kw3">echo</span> <span class="re1">$var</span></pre>

<p>
Define the value of the variable using the result of a command
</p>
<pre class="code bash"><span class="re2">var</span>=<span class="sy0">`</span><span class="kw2">grep</span> <span class="st0">&quot;2007&quot;</span> input.txt <span class="sy0">|</span> <span class="kw2">wc</span> -l<span class="sy0">`</span>
<span class="kw3">echo</span> <span class="re1">$var</span></pre>

<p>
Pay attention to differences between 
</p>
<pre class="code">`</pre>

<p>
and
</p>
<pre class="code bash">  <span class="st_h">'</span></pre>

<p>
If the variable setting is equal to a command result and not equal to a string, use single back-quotation ` to include the command.<br/>

</p>

<p>
var=varname<br/>

var=$(command)<br/>

</p>

<p>
Remember var is space sensitive.<br/>

var=variable is correct<br/>

</p>
<div class="notewarning"> <em>var= variable</em> is not correct<br/>

</div>
</div>
<!-- EDIT6 SECTION "Use the variable" [2356-2996] -->
<h2 class="sectionedit7" id="for_loop">For loop</h2>
<div class="level2">

<p>
We want to automatically count how many observations exist in the years 2007, 2006 2005 in the input.txt file.<br/>

To solve this we can use the variable and list word/number loop function
</p>
<pre class="code bash"><span class="kw1">for</span> var <span class="kw1">in</span> <span class="nu0">2005</span> <span class="nu0">2006</span> <span class="nu0">2007</span>; <span class="kw1">do</span>
    <span class="kw2">grep</span> <span class="re1">$var</span> input.txt <span class="sy0">|</span> <span class="kw2">wc</span> <span class="re5">-l</span>     
<span class="kw1">done</span> </pre>

<p>
Now we want to automatically count how many observations exist from year 2000 to 2008 in input.txt file.<br/>

For this use the serial number list loop function.<br/>

</p>
<pre class="code bash"><span class="kw2">rm</span> input_wc.txt
<span class="kw1">for</span> <span class="br0">&#40;</span><span class="br0">&#40;</span><span class="re2">var</span>=<span class="nu0">2000</span> ; var<span class="sy0">&lt;</span>=<span class="nu0">2008</span> ; var++<span class="br0">&#41;</span><span class="br0">&#41;</span>; <span class="kw1">do</span>
    <span class="kw2">grep</span> <span class="re1">$var</span> input.txt <span class="sy0">|</span> <span class="kw2">wc</span> <span class="re5">-l</span>  <span class="sy0">&gt;&gt;</span> input_wc.txt  
<span class="kw1">done</span> </pre>

</div>
<!-- EDIT7 SECTION "For loop" [2997-] -->