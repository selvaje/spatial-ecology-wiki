
<h1 class="sectionedit1" id="introduction_to_grass_and_satellite_imagery">Introduction to GRASS and Satellite Imagery</h1>
<div class="level1">

<p>
The object of this first exercise is to introduce the program GRASS using the Graphical User Interface (<abbr title="Graphical User Interface">GUI</abbr>).  We will explore many features of the program as we examine a satellite image.  Our purpose now is to simply learn how GRASS can be used to manipulate satellite images.  In later exercises you will learn to run GRASS functions from the command line.  This feature of GRASS allows you to create scripts which can be combined to provide powerful, repeatable image processing capabilities.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Introduction to GRASS and Satellite Imagery&quot;,&quot;hid&quot;:&quot;introduction_to_grass_and_satellite_imagery&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:1,&quot;range&quot;:&quot;1-558&quot;} -->
<h3 class="sectionedit2" id="grass_file_structure">GRASS File Structure</h3>
<div class="level3">

<p>
 Every Grass project has a predefined data structure<br/>

</p>
<ul>
<li class="level1"><div class="li"> GISDBASE - GRASS data are stored in a directory referred to as a DATABASE or “GISDBASE”. This directory must be created before starting to work with GRASS. Within this DATABASE, the projects are organized by project areas stored in subdirectories called LOCATIONs.</div>
</li>
<li class="level1"><div class="li"> LOCATION - A Location is defined by its coordinate system, map projection and geographical boundaries. The subdirectories and files defining a LOCATION are created automatically when a new LOCATION is created in GRASS.</div>
</li>
<li class="level1"><div class="li"> MAPSET - A MAPSET is a unique container of data for a Location.  Locations can have many MAPSETs and each MAPSET is stored as a subdirectory of a LOCATION. A new MAPSET can be added at GRASS startup.</div>
</li>
</ul>
<div class="plugin_note noteclassic">Other remote sensing programs store data in various formats, typically as large binary files.  For example, ERDAS Imagine files have header information embedded in the “.IMG” file while ENVI stores image data in a binary file and places file metadata in an associated “.HDR” file.<br/>

With GRASS we import data directly into the database.
</div>
</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;GRASS File Structure&quot;,&quot;hid&quot;:&quot;grass_file_structure&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:2,&quot;range&quot;:&quot;559-1700&quot;} -->
<h3 class="sectionedit3" id="grass_command_structure">GRASS Command Structure</h3>
<div class="level3">
<div class="table sectionedit4"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0">prefix </th><th class="col1 leftalign"> function    </th><th class="col2 leftalign"> class type of command          </th><th class="col3 leftalign"> example                               </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0 leftalign" rowspan="2">d.*    </td><td class="col1 centeralign" rowspan="2">  display    </td><td class="col2 leftalign" rowspan="2"> graphical output             </td><td class="col3 leftalign"> d.rast: views raster map                </td>
	</tr>
	<tr class="row2">
		<td class="col0 leftalign"> d.vect: views vector map                </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign">db.*   </td><td class="col1 centeralign">  database   </td><td class="col2 leftalign"> database management          </td><td class="col3 leftalign"> db.select: selects value(s) from table  </td>
	</tr>
	<tr class="row4">
		<td class="col0 leftalign">g.*    </td><td class="col1 centeralign">  general    </td><td class="col2 leftalign"> general file operations      </td><td class="col3 leftalign"> g.rename: renames map                   </td>
	</tr>
	<tr class="row5">
		<td class="col0 leftalign">i.*    </td><td class="col1 centeralign">  imagery    </td><td class="col2 leftalign"> image processing             </td><td class="col3 leftalign"> i.smap: image classifier                </td>
	</tr>
	<tr class="row6">
		<td class="col0 leftalign">ps.*   </td><td class="col1 rightalign">  postscript </td><td class="col2 leftalign"> map creation format          </td><td class="col3 leftalign"> ps.map: map creation in Postscript      </td>
	</tr>
	<tr class="row7">
		<td class="col0 leftalign" rowspan="2">r.*    </td><td class="col1 centeralign" rowspan="2">  raster     </td><td class="col2 leftalign" rowspan="2"> raster data processing       </td><td class="col3"> r.buffer: buffer around raster features </td>
	</tr>
	<tr class="row8">
		<td class="col0 leftalign"> r.mapcalc: map algebra                  </td>
	</tr>
	<tr class="row9">
		<td class="col0 leftalign">r3.*   </td><td class="col1 centeralign">  voxel      </td><td class="col2"> raster voxel data processing </td><td class="col3 leftalign"> r3.mapcalc: volume map algebra          </td>
	</tr>
	<tr class="row10">
		<td class="col0 leftalign">v.*    </td><td class="col1 centeralign">  vector     </td><td class="col2 leftalign"> vector data processing       </td><td class="col3 leftalign"> v.overlay: vector map intersections     </td>
	</tr>
</table></div>
<!-- EDIT{&quot;target&quot;:&quot;table&quot;,&quot;name&quot;:&quot;&quot;,&quot;hid&quot;:&quot;table&quot;,&quot;secid&quot;:4,&quot;range&quot;:&quot;1738-2804&quot;} -->
<p>
<br/>

</p>
<div class="plugin_note notetip">For detailed instructions on grass command syntax and use, go to the <a href="http://grass.osgeo.org/grass70/manuals/index.html" class="urlextern" target="blanc" title="http://grass.osgeo.org/grass70/manuals/index.html" rel="nofollow noopener">GRASS online manual</a> or in the GRASS terminal type <strong>man</strong> and a function name. As an example <pre class="code">man r.info</pre>

</div>
</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;GRASS Command Structure&quot;,&quot;hid&quot;:&quot;grass_command_structure&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:3,&quot;range&quot;:&quot;1701-3060&quot;} -->
<h2 class="sectionedit5" id="exploring_the_interface">Exploring the Interface</h2>
<div class="level2">

<p>
Open the <strong>Desktop GIS</strong> folder and double click on <a href="/dokuwiki/lib/exe/detail.php?id=wiki%3Abasicgrasskenya&amp;media=wiki:grass-logo.jpg" class="media" title="wiki:grass-logo.jpg"><img src="/dokuwiki/lib/exe/fetch.php?w=50&amp;tok=11e95d&amp;media=wiki:grass-logo.jpg" class="media" alt="" width="50" /></a> to start the program. This opens a GRASS terminal window followed by the <em>Welcome to GRASS</em> screen.<br/>

</p>

<p>
Navigate to the GRASS GIS database in the folder <strong>/home/user/ost4sem/grassdb</strong> Select the GRASS Project Location <strong>KenyaUTM.</strong>  For the Mapset click New and enter <strong>user</strong> to create the new Mapset.  Then click Start GRASS to open the <strong>Layer Manager</strong> and a separate <strong>Map Display</strong> window.  Notice that the Layer Manager has a menu bar and several toolbars and the Map Display window has a separate toolbar.
</p>

<p>
<strong>Running Commands</strong>
</p>

<p>
There are several ways to run commands in GRASS.  You can select an icon from the Layer Manager or Display Window, make a menu selection, manually enter a command in the Command Console of the Layer Manager, or enter a command in the GRASS terminal window.  Let&#039;s run a few commands to gather information about the data for this project.
</p>

<p>
Use the Layer Manager menu to list all of the raster layers in the project:
</p>
<ul>
<li class="level1"><div class="li"> File | Manage Maps | List [g.list]</div>
</li>
<li class="level1"><div class="li"> Check &#039;raster map(s)&#039; and click <strong>Run</strong></div>
</li>
<li class="level1"><div class="li"> All raster layers in the Location are listed</div>
</li>
</ul>

<p>
Now find out detail information about one of these raster datasets:
</p>
<ul>
<li class="level1"><div class="li"> Raster | Reports and statistics | Basic raster metadata [r.info]</div>
</li>
<li class="level1"><div class="li"> Use the drop-down arrow to select <strong>1995Jan30_B4@Permanent</strong> and click <strong>Run</strong></div>
</li>
<li class="level1"><div class="li"> This lists a great deal of file information including; data type, number of rows and columns, projection, and data range.</div>
</li>
</ul>

<p>
<br/>
In the r.list window click <strong>Copy</strong> to place the command in the clipboard.  You will run this directly from the Command Console of the Layer Manager
</p>
<ul>
<li class="level1"><div class="li"> Click the <em>Command console</em> tab on bottom of the Layer Manager window</div>
</li>
<li class="level1"><div class="li"> Paste the command line just above the tabs, and hit Enter</div>
</li>
<li class="level1"><div class="li"> The results are posted in the Layer Manager window</div>
</li>
</ul>

<p>
<br/>
Its easy to quickly apply the same command to another dataset.
</p>
<ul>
<li class="level1"><div class="li"> With the cursor in the Command console window use the keyboard Up Arrow to retrieve the last command.</div>
</li>
<li class="level2"><div class="li"> Edit the command line to change &#039;B4&#039; to &#039;Kelvin&#039; and hit enter.</div>
</li>
<li class="level2"><div class="li"> Data for this layer are displayed</div>
</li>
</ul>

<p>
Finally, click in the GRASS terminal window, paste the command line, and hit Enter.  In each case you get the same results as you do using the menu selection.
</p>

<p>
Close the g.list and r.list windows.
</p>
<div class="plugin_note notetip">Once you learn the basic commands, the Command Console and GRASS terminal are faster ways to run many GRASS functions.  You can run both GRASS and Linux shell commands in the GRASS terminal window, giving you the ability to develop very powerful scripts.

</div>
</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Exploring the Interface&quot;,&quot;hid&quot;:&quot;exploring_the_interface&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:5,&quot;range&quot;:&quot;3061-5709&quot;} -->
<h2 class="sectionedit6" id="working_with_images">Working with Images</h2>
<div class="level2">

<p>
In this section we will explore a variety of raster data and image analysis tools.  We will use a Landsat TM image dated 30 January 1995.  The image has already been imported into GRASS and subset to the region around Nairobi. Other data include the thermal band converted to degrees Kelvin and the SRTM elevation dataset. 
</p>

<p>
Begin by loading your first rater file.
</p>
<ul>
<li class="level1"><div class="li">Use the <strong>Add Map</strong> tool <a href="/dokuwiki/lib/exe/detail.php?id=wiki%3Abasicgrasskenya&amp;media=wiki:addmap.jpg" class="media" title="wiki:addmap.jpg"><img src="/dokuwiki/lib/exe/fetch.php?w=50&amp;tok=a15899&amp;media=wiki:addmap.jpg" class="media" alt="" width="50" /></a> in the Layer Manager.</div>
</li>
<li class="level1"><div class="li">Select the file <strong>1995Jan30b1</strong>  This file is the first (Blue) band of the Landsat image and is displayed in a gray scale.</div>
</li>
<li class="level1"><div class="li">Use the navigation tools in the Map Display window to zoom in and out and pan around the image</div>
</li>
<li class="level1"><div class="li">Use the Query Raster tool <a href="/dokuwiki/lib/exe/detail.php?id=wiki%3Abasicgrasskenya&amp;media=wiki:queryraster.jpg" class="media" title="wiki:queryraster.jpg"><img src="/dokuwiki/lib/exe/fetch.php?w=35&amp;tok=8070d9&amp;media=wiki:queryraster.jpg" class="media" alt="" width="35" /></a> to examine cell values at various locations in the map</div>
</li>
<li class="level1"><div class="li">In the Layer Manager right-click on the filename to view the functions that can be selected here</div>
</li>
<li class="level1"><div class="li">Select <strong>View Metadata.</strong>  This is another way to run the r.info command we ran earlier</div>
</li>
<li class="level1"><div class="li">Select <strong>Histogram</strong> to the distribution of data by digital numbers</div>
</li>
<li class="level1"><div class="li">Select <strong>Set color table</strong> to change the map display from gray to a predefined color scheme.</div>
</li>
<li class="level1"><div class="li">- This opens the r.colors window with the raster already selected</div>
</li>
<li class="level1"><div class="li">- Click on the Define tab and in the &#039;Name of color table&#039; box use the drop-down arrow to select a color scheme</div>
</li>
<li class="level1"><div class="li">- Click Run to apply the color table.  Not all color tables can be applied to all raster layers.</div>
</li>
<li class="level1"><div class="li">- Select and Run the <strong>grey</strong> color table before moving on</div>
</li>
<li class="level1"><div class="li">- Close the r.colors window</div>
</li>
</ul>

<p>
Now we want to load a three band image.  We will use the Landsat bands 3,2, and 1 to construct a natural color RGB image.
</p>
<ul>
<li class="level1"><div class="li">Use the <strong>Add various raster maps</strong> tool <a href="/dokuwiki/lib/exe/detail.php?id=wiki%3Abasicgrasskenya&amp;media=wiki:addimage.jpg" class="media" title="wiki:addimage.jpg"><img src="/dokuwiki/lib/exe/fetch.php?w=35&amp;tok=ba3a49&amp;media=wiki:addimage.jpg" class="media" alt="" width="35" /></a> in the Layer Manager and select <strong>Add RGB map layer</strong>.  We will refer to this as the <strong>Add Image</strong> tool for the remainder of the exercise.
</div>
</li>
<li class="level1"><div class="li">Select the file <strong>1995Jan30b3</strong> for the Red layer</div>
</li>
<li class="level1"><div class="li">Select the file <strong>1995Jan30b2</strong> for the Green layer</div>
</li>
<li class="level1"><div class="li">Select the file <strong>1995Jan30b1</strong> for the Blue layer</div>
</li>
</ul>

<p>
Use the Query tool to display the values of the three bands in the map display
</p>

<p>
Use the <strong>Add Image</strong> tool to add a second image map - using bands 5, 4, and 3 for the R,G, and B layers.  In this false color image vegetation is displayed as bright green, soils as pink, urban areas are dark purple, and water is black.
</p>

<p>
In the Layer Manager toggle the new image map on and off to see how the landscape appears when viewing different bands.  This ability to “see” beyond the visible spectrum is one of the powerful features of satellite remote sensing.
</p>

<p>
Use the <strong>Add Map</strong> tool to add the raster map <strong>1995Jan30NDVI</strong> to the Map Display.  Note that a color table has been previously defined for this layer, displaying healthy, dense vegetation as dark green, soils brown, urban areas as white, and water as dark blue to black.<br/>

In the Layer Manager right-click on the NDVI layer and select Metadata then Histogram to view the data ranges and distributions.
</p>

<p>
Use the <strong>Add Map</strong> tool to add the raster map <strong>1995Jan30Kelvin</strong> and <strong>SRTM</strong> maps to the Map Display<br/>

Explore the images and view the Metadata and Histograms as you did with the NDVI layer.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Working with Images&quot;,&quot;hid&quot;:&quot;working_with_images&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:6,&quot;range&quot;:&quot;5710-8923&quot;} -->
<h3 class="sectionedit7" id="workspace">Workspace</h3>
<div class="level3">

<p>
Before we proceed it is a good idea to save the current Workspace.  A Workspace is like a digital image bookmark. This will create a list of all Map Layers in use, their order in the Layer Manage, and their color tables. If you close GRASS you can open the Workspace at alater time to pick up right where you were when the Workspace was saved.
</p>
<ul>
<li class="level1"><div class="li">From the menu select <strong>FIle | Workspace | Save as</strong></div>
</li>
<li class="level1"><div class="li">Navigate to the folder <strong>\home\user\ost4sem\grassdb\KenyaUTM</strong></div>
</li>
<li class="level1"><div class="li">Enter a Workspace Name and click Save</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Workspace&quot;,&quot;hid&quot;:&quot;workspace&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:7,&quot;range&quot;:&quot;8924-9455&quot;} -->
<h3 class="sectionedit8" id="explore_raster_map_layers">Explore raster map layers</h3>
<div class="level3">

</div>

<h4 id="using_the_query_tool">Using the Query tool</h4>
<div class="level4">

<p>
In the Layer Manager drag the NDVI, Kelvin and SRTM layers below the 543-RGB image map.
</p>

<p>
Make these three layers active and use the Query tool to display cell values of the three layers at one time.  The SRTM layer shows the elevation in meters where you clicked, the Kelvin layer shows the cell temperature, and the NDVI layer shows the index value representing vegetation health.
</p>

<p>
Compare values in the Rift Valley in the southwest with the vegetated region in the upper part of the image and the water in the northeast.  Spend a few minutes exploring the scene.
</p>

</div>

<h4 id="using_map_swipe">Using Map Swipe</h4>
<div class="level4">

<p>
The Map Swipe tool is a nice way to examine two layers in a single window.  You select the layers then move a slider back and forth across the display.  You can compare how temperature and NDVI vary across the landscape.  It is also a good way to view changes over time.
</p>
<ul>
<li class="level1"><div class="li">From the menu select <strong>File | Map Swipe [g.gui.mapswipe]</strong></div>
</li>
<li class="level1"><div class="li">Select the NDVI and SRTM layers and click OK</div>
</li>
<li class="level1"><div class="li">Drag the slider back and forth to examine the layers.</div>
</li>
<li class="level1"><div class="li">Click on the Swipe mode button and change to Mirror mode.  This links the two displays so when you pan and zoom in one map the other changes as well.</div>
</li>
<li class="level1"><div class="li">You can use the Select map tool to change the layers in the display</div>
</li>
<li class="level1"><div class="li">Close the Map Swipe window</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Explore raster map layers&quot;,&quot;hid&quot;:&quot;explore_raster_map_layers&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:8,&quot;range&quot;:&quot;9456-10811&quot;} -->
<h3 class="sectionedit9" id="analysis_map_tools">Analysis map Tools</h3>
<div class="level3">

<p>
The <strong>Analyze map</strong> tool <a href="/dokuwiki/lib/exe/detail.php?id=wiki%3Abasicgrasskenya&amp;media=wiki:analyzemap.jpg" class="media" title="wiki:analyzemap.jpg"><img src="/dokuwiki/lib/exe/fetch.php?w=35&amp;tok=eb84b7&amp;media=wiki:analyzemap.jpg" class="media" alt="" width="35" /></a> on the Map Display window offers a selection of useful tools.  From here you can measure distances and areas, view a surface profile or map histogram, or create a two-band scatterplot.  We will briefly explore some of these tools now.
</p>

</div>

<h4 id="raster_profile">Raster Profile</h4>
<div class="level4">

<p>
The raster Profile tool will display layer values under a transect drawn in the map display.  Data are displayed from left to right in the Profile window so you should create your transects beginning on the west side of the map.
</p>
<ul>
<li class="level1"><div class="li">From the Analyze map tool select the <strong>Profile surface map</strong> or<ul>
<li class="level1"><div class="li"> - In the Layer Manager right-click on the <strong>SRTM</strong> layer name and select Profile to open the dialog</div>
</li>
<li class="level1"><div class="li"> The SRTM layer should be selected but you could pick a different data layer to examine</div>
</li>
<li class="level1"><div class="li"> Use the <strong>Draw Transect</strong> tool <a href="/dokuwiki/lib/exe/detail.php?id=wiki%3Abasicgrasskenya&amp;media=wiki:drawtransect.jpg" class="media" title="wiki:drawtransect.jpg"><img src="/dokuwiki/lib/exe/fetch.php?w=35&amp;tok=b20af2&amp;media=wiki:drawtransect.jpg" class="media" alt="" width="35" /></a>  to make the transect.  Draw this from the northwest corner to the southeastYou can make a multiple-segment line if you wish</div>
</li>
<li class="level1"><div class="li"> Click in the Draw Transect tool again to clear your transect</div>
</li>
<li class="level1"><div class="li"> Draw another transect from the lower left corner (part of the Rift Valley) to the upper left corner.</div>
</li>
<li class="level1"><div class="li"> Explore different regions of the scene</div>
</li>
<li class="level1"><div class="li"> Use the Add raster map tool in the Profile dialog to add another data layer to Profile</div>
</li>
<li class="level1"><div class="li"> Select the Kelvin layer</div>
</li>
<li class="level1"><div class="li"> When you draw a transect you will see data displayed for both maps.  Because the data ranges are so different, the Kelvin layer looks like a flat line.</div>
</li>
<li class="level1"><div class="li"> Close the Profile tool and re-open it using only the Kelvin layer to display these values</div>
</li>
<li class="level1"><div class="li"> Look at the other tools in this dialog.  You can export the data, calculate statistics, and more</div>
</li>
</ul>
</div>
</li>
</ul>

</div>

<h4 id="scatterplots">Scatterplots</h4>
<div class="level4">
<ul>
<li class="level1"><div class="li"> Select <strong>Create bivariate scatterplots of raster maps</strong> from the Analyze tool.</div>
</li>
<li class="level1"><div class="li"> Pick bands 3 and 4 to show how the Red and Near Infrared data relate to each other</div>
</li>
<li class="level1"><div class="li"> Change bands to explore the data</div>
</li>
</ul>

<p>
Examine some of the othertools here such as measuring distance and areas and creating histograms.
</p>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Analysis map Tools&quot;,&quot;hid&quot;:&quot;analysis_map_tools&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:9,&quot;range&quot;:&quot;10812-12852&quot;} -->
<h3 class="sectionedit10" id="make_a_map">Make a Map</h3>
<div class="level3">

<p>
GRASS has a select of map elements that you can use to construct output maps.  While you can place the elements on top of your image, it may be better to zoom out so that the image has white space around it for these elements.  From the Map Display window select the <strong>Add map elements</strong> tool <a href="/dokuwiki/lib/exe/detail.php?id=wiki%3Abasicgrasskenya&amp;media=wiki:mapelements.jpg" class="media" title="wiki:mapelements.jpg"><img src="/dokuwiki/lib/exe/fetch.php?w=35&amp;tok=8bcfb9&amp;media=wiki:mapelements.jpg" class="media" alt="" width="35" /></a> to begin.
</p>
<ul>
<li class="level1"><div class="li">Click on Show/hide legend to add a legend to your display</div>
</li>
<li class="level1"><div class="li">Drag it to where you would like it to appear</div>
</li>
<li class="level1"><div class="li">Add a scale bar and north arrow in the same way</div>
</li>
<li class="level1"><div class="li">Double-click on a map element to access its display properties</div>
</li>
<li class="level1"><div class="li">Add a text layer to enter a map title.  Use the Set font button to increae the font size to at least 18</div>
</li>
<li class="level1"><div class="li">Place the title at the top of the map</div>
</li>
<li class="level1"><div class="li">When you are finished click the <strong>Save display to file</strong> tool <a href="/dokuwiki/lib/exe/detail.php?id=wiki%3Abasicgrasskenya&amp;media=wiki:displaytofile.jpg" class="media" title="wiki:displaytofile.jpg"><img src="/dokuwiki/lib/exe/fetch.php?w=35&amp;tok=aa47b2&amp;media=wiki:displaytofile.jpg" class="media" alt="" width="35" /></a></div>
</li>
<li class="level1"><div class="li">For now accept the default Width and Height</div>
</li>
<li class="level1"><div class="li">Select a location, file type, and filename and click Save</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Make a Map&quot;,&quot;hid&quot;:&quot;make_a_map&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:10,&quot;range&quot;:&quot;12853-13798&quot;} -->
<h3 class="sectionedit11" id="examine_multiple_band_images">Examine multiple band images</h3>
<div class="level3">

<p>
The Query tool does a nice job of showing the data values of the displayed bands.  It does not show the spectral signature for all layers in the satellite image.  In GRASS full image is defined as an Image Group.<br/>

Before we can examine the spectral signature we need to create an Image Group.  Then we can use the i.spectral tool to examine the image.
</p>
<ul>
<li class="level1"><div class="li">From the Layer Manager menu select <strong>Imagery | Develop images and groups | Create/edit group [i.group]</strong></div>
</li>
<li class="level1"><div class="li">Enter <strong>1995VIsible</strong> in the Select existing group box</div>
</li>
<li class="level1"><div class="li">Enter <strong>1995Jan30</strong> in the Pattern box and click the +Add button</div>
</li>
<li class="level1"><div class="li">This opens the Add selected map layers dialog</div>
</li>
<li class="level1"><div class="li">Change the Mapset from user to PERMANENT, the Mapset that holds these map layers</div>
</li>
<li class="level1"><div class="li">We only want the map layers for the visible spectrum so select layers b1 through b5 and b7</div>
</li>
<li class="level1"><div class="li">Click Apply and OK<br/>

<br/>
</div>
</li>
<li class="level1"><div class="li">From the Layer Manager menu select <strong>Imagery | Spectral response</strong></div>
</li>
<li class="level1"><div class="li">- Click on the Optional tab and check Use gnuplot for display</div>
</li>
<li class="level1"><div class="li">- In the Input tab select the imagery group <strong>1995Visible</strong> from the user Mapset</div>
</li>
<li class="level1"><div class="li">- Select the arrow tool to the right of the Coordinates box</div>
</li>
<li class="level1"><div class="li">- Click in a pink soil/rock area and click Run
<div class="plugin_note noteimportant">Examine the plot <strong>before</strong> moving your mouse.  Currently the gnuplot will close as soon as the mouse moves over the plot.  We hope this is resolved soon.
</div></div>
</li>
<li class="level1"><div class="li">Use the Coordinate arrow again to select an area of green vegetation, then an area of water, and finally an area in the dark purple urban area.</div>
</li>
<li class="level1"><div class="li">Click Run to compare the spectral signatures of the four features in the landscape.</div>
</li>
<li class="level1"><div class="li">If you have selected the features in the order specified, then Water will be the very low blue curve.  Vegetation will be in green with a large jump in values for band 4 (near infrared)</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Examine multiple band images&quot;,&quot;hid&quot;:&quot;examine_multiple_band_images&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:11,&quot;range&quot;:&quot;13799-15630&quot;} -->
<h3 class="sectionedit12" id="raster_map_calculator_-_rmapcalc">Raster Map Calculator - r.mapcalc</h3>
<div class="level3">

<p>
The Raster Map Calculator is a very powerful tool in the GRASS suite.  It can be used to apply very sophisticated mathematical operations to one or more map layers.  On example is the Normalized Difference Vegetation Index (NDVI).  This is a ratio created from the Near Infrared and Red map layers.  This tool is also used to subset map layers, create masks, and manipulate cell values sing If statements, etc.
</p>
<div class="plugin_note noteclassic">Convert the map layer of degrees Kelvin to Celsius
</div><ul>
<li class="level1"><div class="li">Open the <strong>Kelvin</strong> map layer if it is not already open</div>
</li>
<li class="level1"><div class="li">From the Layer Manger menu select <strong>Raster | Raster map calculator [r.mapcalc]</strong></div>
</li>
<li class="level1"><div class="li">Click on the Operands drop-down arrow to see look at the types of functions vailable</div>
</li>
<li class="level1"><div class="li">In the <strong>Insert existing raster map</strong> box select the Kelvin layer</div>
</li>
<li class="level1"><div class="li">To convert Kelvin to Celsius you subtract 273.15</div>
</li>
<li class="level1"><div class="li">Click on the minus operator <strong>-</strong> then enter the value <strong>273.15</strong></div>
</li>
<li class="level1"><div class="li">Enter <strong>1995Jan30Celsius</strong> for the output filename and click Run</div>
</li>
<li class="level1"><div class="li">Make both the Kelvin and Celsius layers active and use the Query results tool to verify the data</div>
</li>
<li class="level1"><div class="li">Change the Color Table for the new layer</div>
</li>
<li class="level1"><div class="li">- Right-click on the layer name and select <strong>Set color table</strong></div>
</li>
<li class="level1"><div class="li">- Click on the Define tab, in the <em>Name of color table</em> select Celsius then click on Run</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Raster Map Calculator - r.mapcalc&quot;,&quot;hid&quot;:&quot;raster_map_calculator_-_rmapcalc&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:12,&quot;range&quot;:&quot;15631-16956&quot;} -->
<h2 class="sectionedit13" id="exiting_from_grass">Exiting from GRASS</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> Form the menu select <strong>File | Exit</strong></div>
</li>
<li class="level1"><div class="li"> Save the Workspace if you wish</div>
</li>
<li class="level1"><div class="li"> The GRASS teminal window is still open and should be closed</div>
</li>
<li class="level1"><div class="li"> Click in the terminal window, type <strong>exit</strong> and hit the &lt;Enter&gt; key</div>
</li>
</ul>

</div>
<!-- EDIT{&quot;target&quot;:&quot;section&quot;,&quot;name&quot;:&quot;Exiting from GRASS&quot;,&quot;hid&quot;:&quot;exiting_from_grass&quot;,&quot;codeblockOffset&quot;:0,&quot;secid&quot;:13,&quot;range&quot;:&quot;16957-&quot;} -->